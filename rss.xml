<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Walk on the Byte Side]]></title><description><![CDATA[El blog personal de Ander Granado, donde el susodicho cuenta sus mierdas]]></description><link>https://ander94lakx.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Sat, 05 Feb 2022 12:19:56 GMT</lastBuildDate><item><title><![CDATA[Sobre mí]]></title><description><![CDATA[Como habrás podido comprobar, me llamo Ander Granado. Soy ingeniero informático, desarrollador de software y hacker. Este es mi blog, en el…]]></description><link>https://ander94lakx.github.io/pages/about/</link><guid isPermaLink="false">https://ander94lakx.github.io/pages/about/</guid><content:encoded>&lt;p&gt;Como habrás podido comprobar, me llamo Ander Granado. Soy ingeniero informático, desarrollador de software y hacker.&lt;/p&gt;
&lt;p&gt;Este es mi blog, en el que puedes encontrar artículos sobre las cosas con las que voy trasteando, ya sea de programación, sobre hacking o sobre cualquier cosa que se me pueda pasar por la cabeza. Además de ello, podrás encontrar muy poca consistencia a la hora de realizar entradas y un lenguaje relativamente caótico y ácido.&lt;/p&gt;
&lt;p&gt;También tengo una serie de redes sociales donde puedes seguirme. Tengo &lt;a href=&quot;https://www.instagram.com/andergrma/&quot;&gt;Instagram&lt;/a&gt;, donde subo principalmente fotos de mis viajes y de lo que leo (muy hipster, lo sé). También tengo &lt;a href=&quot;https://twitter.com/andergrma&quot;&gt;Twitter&lt;/a&gt;, que si no lo tengo abandonado, es lo que uso para enterarme de cosas nuevas del mundo del desarrollo, seguir a artistas, etcétera. Por último, aunque no es una red social, tengo &lt;a href=&quot;https://github.com/ander94lakx&quot;&gt;GitHub&lt;/a&gt;, donde tengo subidos algunos proyectos, desde proyectos antiguos de la uni hasta algunas cosilla que estoy haciendo (como, por ejemplo, este mismo blog).&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Cómo automatizar la búsqueda de piso con un bot de Telegram]]></title><description><![CDATA[Estoy buscando piso y es un proceso de mierda. Hay una cantidad extrañamente escasa de pisos en mi ciudad y los que hay desaparecen…]]></description><link>https://ander94lakx.github.io/blog/2022-02-05-bot-telegram-buscar-piso/</link><guid isPermaLink="false">https://ander94lakx.github.io/blog/2022-02-05-bot-telegram-buscar-piso/</guid><pubDate>Sat, 05 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Estoy buscando piso y es un proceso de mierda. Hay una cantidad extrañamente escasa de pisos en mi ciudad y los que hay desaparecen rápidamente.&lt;/p&gt;
&lt;p&gt;Me da pereza meterme todo el rato a buscar piso. En realidad no es algo tan complicado, pero a veces estoy ocupado y se me pasa mirar ese día, o estoy fuera y con el móvil es más engorroso.&lt;/p&gt;
&lt;p&gt;Llevaba tiempo queriendo probar a hacer un bot de Telegram. No sabía que hacer exactamente, pero el otro día se me iluminó la bombilla. As que he creado un bot que me avisa de los pisos que hay en mi ciudad disponibles.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ff41f125f3a3f618b3ef73d752e60669/0f98f/scraping_telegram_python_bot.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.49367088607595%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB0JJNxYLlf//EABoQAAICAwAAAAAAAAAAAAAAAAECERIAAyL/2gAIAQEAAQUCmgd4FQc2Nwy3UsZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAEAIxcf/aAAgBAQAGPwLUCxdCBkjlf//EABoQAQEBAQADAAAAAAAAAAAAAAERACExQaH/2gAIAQEAAT8h8tD8zs7i57pkag90+AHtiRbv/9oADAMBAAIAAwAAABD4z//EABcRAQADAAAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8QpXY//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EDCf/8QAHBABAAIDAQEBAAAAAAAAAAAAAQARITFBcZGx/9oACAEBAAE/EAjeWijCEwzY3fhRGA1s7j9hIRbfkEpligdb+ThB1n//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Scraping Python Telegram bot&quot;
        title=&quot;Scraping Telegram bot hecho en Python&quot;
        src=&quot;/static/ff41f125f3a3f618b3ef73d752e60669/828fb/scraping_telegram_python_bot.jpg&quot;
        srcset=&quot;/static/ff41f125f3a3f618b3ef73d752e60669/ff44c/scraping_telegram_python_bot.jpg 158w,
/static/ff41f125f3a3f618b3ef73d752e60669/a6688/scraping_telegram_python_bot.jpg 315w,
/static/ff41f125f3a3f618b3ef73d752e60669/828fb/scraping_telegram_python_bot.jpg 630w,
/static/ff41f125f3a3f618b3ef73d752e60669/0ede0/scraping_telegram_python_bot.jpg 945w,
/static/ff41f125f3a3f618b3ef73d752e60669/3ac88/scraping_telegram_python_bot.jpg 1260w,
/static/ff41f125f3a3f618b3ef73d752e60669/0f98f/scraping_telegram_python_bot.jpg 1920w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Esto tiene dos partes. Una es la parte de web scraping. Esto es básicamente automatizar la extracción de información de sitios web. Hoy en dia casi todo se hace desde internet y buscar piso no iba a ser menos. Prácticamente todas las inmobiliarias locales y los particulares que alquilan piso cuelgan sus anuncios en alguna plataforma como Idealista o Fotocasa, así que consultando ahí puedo ir viendo que opciones nuevas van apareciendo. Es básicamente lo que estaba haciendo hasta ahora a mano y sin la constancia suficiente. Automatizándolo con web scraping me permite obtener toda esa información de un vistazo.&lt;/p&gt;
&lt;p&gt;La otra parte es la del bot de Telegram. Hasta hace dos días no tenia ni idea de como iba. Básicamente Telegram tiene una API cojonuda para poder hacer de todo con ella. Se pueden crear bots que se ejecuten donde sea para comunicarse directamente con los usuarios, escribir en chats o canales y realizar mil cosas. A parte, hay un &lt;a href=&quot;https://github.com/python-telegram-bot/python-telegram-bot&quot;&gt;wrapper para Python&lt;/a&gt; muy bueno con el que se puede utilizar la API desde Python de manera muy sencilla.&lt;/p&gt;
&lt;h2&gt;Parte 1: web scraping con Selenium&lt;/h2&gt;
&lt;p&gt;No es la primera vez que hago web scraping. Hace tiempo hice un script que permitía scrapear instagram para descargar todas las imágenes de un usuario. Podéis echar un vistazo al &lt;a href=&quot;https://ander94lakx.github.io/blog/2020-04-25-instagram-bot-python/&quot;&gt;post&lt;/a&gt; que hice o al &lt;a href=&quot;https://github.com/ander94lakx/InstaBot&quot;&gt;código&lt;/a&gt; del bot (es un bot, pero no es un bot de Telegram, ojo).&lt;/p&gt;
&lt;p&gt;Cuando hice ese script utilicé &lt;a href=&quot;https://www.selenium.dev/&quot;&gt;Selenium&lt;/a&gt;, que es probablemente la mejor herramienta para web scraping que existe. No sirve solo para eso, pero permite automatizar el manejo de navegadores. Con esto lo que se puede hacer, es abrir webs, navegar por ellas, realizar acciones y extraer información de ellas programáticamente. Esto es mucho mejor que mandar directamente request con una librería para realizar peticiones, ya que al lanzar realmente una instancia de un navegador, se pueden saltar medidas que algunos sitios web tienen para bloquear mecanismos automatizados. La pega que tiene es que, al tener que abrir un navegador, no se puede ejecutar en un entorno que no tenga pantalla (aunque esto se puede solucionar fácil con librerías que simulan pantallas como &lt;a href=&quot;https://pypi.org/project/PyVirtualDisplay/&quot;&gt;PyVirtualDisplay&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Con las herramientas listas e instaladas, solo queda usar Selenium para comenzar a hacer web scraping. En este caso lo simple es mejor. en vez de pasarle la URL base de un sitio de búsqueda de pisos, se puede sacar las URL con los parámetros para filtrar la búsqueda. En mi caso, y poniendo Idealista como ejemplo, la URL sería algo así:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;https://www.idealista.com/alquiler-viviendas/vitoria-gasteiz-alava/?ordenado-por&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;precios-asc&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como se puede ver, ya estoy filtrando por mi ciudad, a parte de que ordena por precio para que aparezcan los más baratos primero (no hay mucha pasta por aquí). Esto se podría acotar mucho más. Como la mayoría de sitios de este tipo usan los parámetros de búsqueda en la propia URL (algo muy útil para poder después guardar marcadores con ello), se puede ahorrar muchísimo trabajo de scraping solo con elegir la URL adecuada.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0e83e25c534428cbc1a9ce2e02db10bf/e8d8a/idealista_web.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 79.74683544303798%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAB2HAAAdhwGP5fFlAAADwklEQVQ4y0WU228bVRDG/bfwgPoXUCHxlGfEAzwgEG88I1EpQANVAadpqrYhQaUp6U1AgbRqBaIvLWoLqiDKtWma1Inj2Fnbu16v7fVe7L3Z6/jH7KbASqOZs+fsd76Z+WYza3snWMyNoTgT1IJJNG8CVUyXWA/O/O/D0+jOt5TNq+y3LqNKXDEn2W1kxZ9ir56V706T8aOIsNfD9UOCqEfXc+h0bAYHPSBmOIw5GPYZJrEYDF5Ysu6LP3hhg3Q/025b6HqdRrOJ0WhIbFBWKtRqOqqmpXuaqqFpNSqVKmr1MB4KxnAIkZAIw4h+Xy4+GJJRW7fYKk2Qr0yTU06jNu8IQw/PcfAatjDu4nmevHNT6/f79OOEmaDJs7HxlJu35ikUduRsh0xu/iILo5+ylM2y8NEYu3evEAr1bifCMztyyP3PPL+D61q0WgZ6vcrKyiIPH95HUfaoVPdpWy0y28oyyzuPKChrbOQXyaur2IZsqo9pGTncTgJii3fEO1hOB9OyaZgmO7sFnj3PydrCtk05Ywtgc4vF6iJFZZOV4lNy7QK52x+z+ts7VDbmGEj9e9K0KGmeWC8e0kveDf5NWtpxcOj7/R6Z3Xqe5c2/eLLyJ5trC9IAFXX9F5Snd7FqTyR1qWfXJZbDgziml4D2xMKQKPAJfT9dJ2BB6JMx2iWeF9d5srPMUn4B1S2ztrrO5Us3mP/+V/54sMz1b74mv7GGqmhYqk5Xb+LZHXyni293iXsiK2l5FIVkbLOMJbWpmzZKS+W58Yy/f7/PxKlpTp48z52fbzOTPUGtsoftuthtqZVt4YgKooSZdDxOu07KNFOuFNne2aJYLGAYOo1GjZ8unOWtkVcZHzvO+2+OMPLKETRlN9Wa5/l0/SitaZJ+mKQuWowHw/SCTE1XpeUKttPGSSRhNrk3P8eV8Q/57sI5Pj9+jM8+OUalXBKGXQyRkt4OcD0BlVQ7Am66AYbli6w8MlqtKrpqyKTUMdtNmZAKm+tL/HBtlq/OjvPj9VluXJ0lXyhR0dsYbZ9OEGN1ezheX4DF/Bg/GogKwoRhVUQqI1ZXaYpgNa3M40f3mTqT5fzkF1y5OMXszDn2S6V0UmyrjetYqTYDqX0ceCItmXGZxbSGtZqaMkwsUXrd0Lh2aYY3jh7h7aMv8d5rL/PBu6/LfCupDh23I6kn6QVpHYMgxA+SH8zgsIZKWZqyvcluYVvAVOrC9MG9u0yPjzHz5SiXsqPcnJtCl9Ikk2I7Li1HQOSHMBj05RJJvRtgOr4A+/wDjRB3VTzbQyoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Resultados de Idealista&quot;
        title=&quot;Resultados de la búsqueda en Idealista&quot;
        src=&quot;/static/0e83e25c534428cbc1a9ce2e02db10bf/f058b/idealista_web.png&quot;
        srcset=&quot;/static/0e83e25c534428cbc1a9ce2e02db10bf/c26ae/idealista_web.png 158w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/6bdcf/idealista_web.png 315w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/f058b/idealista_web.png 630w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/40601/idealista_web.png 945w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/78612/idealista_web.png 1260w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/e8d8a/idealista_web.png 2349w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Con eso en mente, he creado una sencilla función que permite hacer web scraping para obtener los pisos. Le he puesto una opción para filtrar por precio (aunque es algo que se puede hacer también a través de la URL). El código es el siguiente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;scrap_idealista&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_price&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    driver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; initialize_driver&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;IDEALISTA_URL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    scroll_down_and_up&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# Be kind and accept the cookies&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;didomi-notice-agree-button&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# No cookies button, no problem!&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# Find each flat element&lt;/span&gt;
    elements &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;main-content&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elements&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_elements_by_class_name&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;item-multimedia-container&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    flat_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Get the link for that flat&lt;/span&gt;
        link &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./div/a[@href]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        link &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; link&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attribute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;href&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;# Get the price for that flat&lt;/span&gt;
        result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.*\\n(.*)€\/mes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        price_str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        price &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;price_str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; price &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; max_price&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            flat_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
                &lt;span class=&quot;token string&quot;&gt;&apos;link&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; link&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;token string&quot;&gt;&apos;price&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; price&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&apos;image&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;screenshot_as_png&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;token string&quot;&gt;&apos;image_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.png&apos;&lt;/span&gt; 
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;quit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; flat_list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aquí se ven varias cosas, pero por lo general es bastante sencillo de entender. Antes que nada, se carga el driver de Selenium y se hace scroll por toda la página. Lo primero carga la web y permite tener todo listo para comenzar a buscar. El scroll es debido a que, en ocasiones, las webs van ofreciendo contenido a medida que el usuario va haciendo scroll, por lo que hacer un scroll rápido antes de comenzar a sacar información está muy bien.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;initialize_driver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    driver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; webdriver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Chrome&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;executable_path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./chromedriver.exe&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_window_position&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;set_window_size&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1920&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1080&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; driver&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Usar Selenium es muy sencillo. En este caso estoy usando el driver para Chrome, que tengo justo en mi directorio, por conveniencia. Tras ello, cargar la URL y configurar la ventana para que tenga un tamaño decente. Esto es importante, porque los elementos estarán colocados de diferente manera en función del tamaño de la ventana. El diseño responsive está muy bien, pero es uno de los peores enemigos del &lt;em&gt;scrapper&lt;/em&gt;, así que poner una resolución consistente es importante para obtener siempre los mismos resultados.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;scroll_down_and_up&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_script&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;window.scrollTo(0, document.body.scrollHeight);&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_script&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;window.scrollTo(0, 0);&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En lo que respecta al scroll aquí no hay nada especial. Un poco de JS y listo.&lt;/p&gt;
&lt;p&gt;La chicha está después. Lo primero, aceptar las cookies para poder navegar por el sitio y que no se vea nada raro. Aquí es donde se puede ver la potencia de Selenium&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;didomi-notice-agree-button&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Se explica solo. Se coge el elemento con ese ID, que en este caso es un botón, y se click. Lo siguiente es buscar los elementos con la información de los pisos. Esas tarjetitas que aparecen en lista. Como todos los elementos de una web, tienen clases o atributos que los identifican.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;elements &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;main-content&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elements&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_elements_by_class_name&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;item-multimedia-container&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En este caso he hecho búsquedas con XPath y a través de los nombres de las clases. Si se ve la web de idealista, se puede sacar esta información. En cada web será diferente. Lo bueno de Selenium es que te permite obtener elementos y después buscar dentro de ellos. Así, se puede ir paso a paso hasta llegar a donde se quiere.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/16be55df67c84a2cfa6f9c3db1334fbd/7e23a/idealista_scraping.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACiElEQVQoz22SWU8TURiG+0dYS2npRmnLWhaFgoSYsMiNf8Ff4K3RK2NEE41xiWEJQQgRpJRaymLDIgQFNayFtiyaUmynDEXxQvp4OhivnOTJd85k8uR9zxmVlEggSRKxeJxIJELk8JBoNPqP9LtYLMbv83NSqRTpp6W1nYJ8G9XF9RSZS1HnFaBWawU6VLIs8/3oiB+nSUidi89Tf2d6eSH4FZEJPplRiM+GaW6/hjpHR4mtBpulnCJTCSaDDYOhEFVcPkE6SSPjf7/AiG8C96SfkfEp3L4pXF4fff2DLEzPsfVlg8jBIW3t1ykwFlNlrcJqrqCw0IHFUonZXI5qcGaFoc/zuLYO6FvZo3tpWxCk60OYHkH3UkjZD29Hce9LTG/KNNa3ojeWUFPWiMNWR7VIajWXYdDbUPV4/fQvz+EKfGX825ng5384w7OXFMITJteT1NU0ifMy4LA3UFp0GUeJE7tIqdeJyp3vAjyfWaN7McSL2XUGPoUZDcQY3YnjDkpiSri244yFj3HvyYrQeamJXI1JJGvAUdSA3e6kvKwBq6UC1TPvKreHZrnv+UiHe47epS2GNqOMCKFLMBpMCJnM2K6sJJwSwkZnMxqtiTJRtdhSJc5PVLbWYDKKyvd6fdx8OcCdV2Pc6HhK58I6nv3khTCdMJTAnU4ncO0eKwmvXmkTv4oGXYERrVZPvtZIfm4+Wo0W1WOR7qF7irvD09zqf0vvsqi8e8rQToI3QSFKJwvLinBYyH2rMvXOFrKFICszB73BiNpcSY65VpmqLn+ADu8cDzzzPPItCuEugxtHvA7Exc1KCi4hd4VkhoV4Yk2mtq6F3CwdeRl5ZOcItBYyNWYy1Hr+AK+OL/wvlxPPAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Scraping en Idealista&quot;
        title=&quot;Elementos a buscar con Selenium&quot;
        src=&quot;/static/16be55df67c84a2cfa6f9c3db1334fbd/f058b/idealista_scraping.png&quot;
        srcset=&quot;/static/16be55df67c84a2cfa6f9c3db1334fbd/c26ae/idealista_scraping.png 158w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/6bdcf/idealista_scraping.png 315w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/f058b/idealista_scraping.png 630w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/40601/idealista_scraping.png 945w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/78612/idealista_scraping.png 1260w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/7e23a/idealista_scraping.png 2850w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Buscar a través del id y de las clases es sencillo. Buscar a través de XPath es más complicado pero muy potente. Esto se puede simplificar con una extensión como &lt;a href=&quot;https://github.com/trembacz/xpath-finder&quot;&gt;xPath Finder&lt;/a&gt;, que te permite obtener el XPath de cualquier elemento de una web.&lt;/p&gt;
&lt;p&gt;Con ello ya se tienen una lista de items, que son cada una de las tarjetitas esas. Aquí solo queda sacar la información que se quiera sacar.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Get the link for that flat&lt;/span&gt;
    link &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./div/a[@href]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    link &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; link&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attribute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;href&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# Get the price for that flat&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.*\\n(.*)€\/mes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    price_str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    price &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;price_str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; price &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; max_price&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        flat_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            &lt;span class=&quot;token string&quot;&gt;&apos;link&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; link&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
            &lt;span class=&quot;token string&quot;&gt;&apos;price&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; price&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string&quot;&gt;&apos;image&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;screenshot_as_png
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Para esto hay muchas formas. Selenium te permite sacar el elemento como imagen, por lo que para después enviarlo de esa manera puede estar muy bien. En mi caso saco el piso como imagen (para enviar después por Telegram así), el precio (para ver que no se pase del tope establecido) y el link, para enviarlo junto a cada imagen para poder meterme en el piso que me interesa. El nombre de la imagen me permite después gestionar las imágenes para enviarlas por Telegram.&lt;/p&gt;
&lt;p&gt;Y esto es todo, así de sencillo. Ya solo hay que enviar esa información por Telegram.&lt;/p&gt;
&lt;h2&gt;Parte 2: crear un bot de Telegram&lt;/h2&gt;
&lt;p&gt;Crear un bot de Telegram es tan sencillo como usar &lt;a href=&quot;https://t.me/botfather&quot;&gt;BotFather&lt;/a&gt;, el bot que te permite crear bots. Tras crear un bot con él, te da un token que es lo que te permite hacer lo que quieras con la API. La creación del bot es trivial, consiste en hablar con el bot.&lt;/p&gt;
&lt;p&gt;Una vez teniendo un token se puede hacer uso del &lt;a href=&quot;https://github.com/python-telegram-bot/python-telegram-bot&quot;&gt;wrapper para Python&lt;/a&gt; que he mencionado. Instalar con &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; y listo. Del wrapper he utilizado lo siguiente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; telegram
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; telegram &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Bot&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Update
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; telegram&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ext &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Updater
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; telegram&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ext &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CallbackContext
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; telegram&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ext &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CommandHandler&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Con ello, se puede instanciar el bot con el token obtenido y crear callbacks que permitan estar a la escucha de comandos de manera sencilla.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;token.txt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    updater &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Updater&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; use_context&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dispatcher &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; updater&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatcher

    logging&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;basicConfig&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;%(asctime)s - %(name)s - %(levelname)s - %(message)s&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        level&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;logging&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;INFO&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    dispatcher&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_handler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CommandHandler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;start&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dispatcher&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_handler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CommandHandler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;bilatu&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bilatu&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dispatcher&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_handler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CommandHandler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;idealista&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; idealista&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dispatcher&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_handler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CommandHandler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fotocasa&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fotocasa&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    updater&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_polling&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Esa funcion se ejecuta al arrancar el script. Cojo el token de un archivo separado y creo el bot. En el código se ve que se crean cuatro handlers. Esos son los comandos que después se pueden ejecutar con el bot. en este caso son &lt;code class=&quot;language-text&quot;&gt;/start&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;/bilatu&lt;/code&gt; (“buscar” en euskera),&lt;code class=&quot;language-text&quot;&gt;/idealista&lt;/code&gt; ,&lt;code class=&quot;language-text&quot;&gt;/fotocasa&lt;/code&gt;. Así se puede buscar en todos o solo en uno en específico. Las funciones llamadas con los callbacks son las siguientes:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bilatu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CallbackContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    scrap&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;all&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;idealista&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CallbackContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    scrap&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idealista&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fotocasa&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CallbackContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    scrap&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fotocasa&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;scrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CallbackContext&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; site&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    send_initial_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; update&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    max_price &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; get_max_price&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    flat_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; site &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idealista&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;all&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        flat_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;extend&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrap_idealista&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_price&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; site &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fotocasa&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;all&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        flat_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;extend&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrap_fotocasa&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_price&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    send_results&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;flat_list&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    send_final_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; update&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;send_initial_message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; update&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;effective_chat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Emaidazu minutu bat!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;send_final_message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; update&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;effective_chat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hortxe dauzkazu!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Baásicamente se llaman a unas u otras funciones de scraping en función de el callback que se ejecuta. Los obtetos &lt;code class=&quot;language-text&quot;&gt;context&lt;/code&gt; y &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; permiten obtener la instancia del bot y toda la información relativa a los comandos que se han ejecutado (qué usuario los ha ejecutado, en que chat, grupo o canal, si ha pasado argumentos, etc.). Ahí también se puede ver los sencillo que es mandar un mensaje con un bot con la funcion &lt;code class=&quot;language-text&quot;&gt;bot.send_message()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Lo interesante de esa parte es la función &lt;code class=&quot;language-text&quot;&gt;send_results()&lt;/code&gt;, que coge lo generado por las funciones de scraping (la lista de pisos, cada uno con toda la información mencionada) y lo envía por Telegram.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;send_results&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;flat_list&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; update&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CallbackContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; flat &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; flat_list&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_photo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;effective_chat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; caption&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;flat&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;link&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; photo&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;flat&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;image&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Esto tambien bastante sencillo. Para enviar un mensaje basta con indicar el id del chat (que es algo que se recibe en los callbacks, apra saber desde donde se ha llamdo al comando) y lo que se quiera mandar. Antes se ha visto como se mandaba un mensaje con &lt;code class=&quot;language-text&quot;&gt;bot.send_message()&lt;/code&gt;, pasando el chat y el texto. En este caso se envia la foto de cada piso con &lt;code class=&quot;language-text&quot;&gt;bot.send_photo()&lt;/code&gt;, indicando en &lt;code class=&quot;language-text&quot;&gt;photo&lt;/code&gt; la imagen recogida y en &lt;code class=&quot;language-text&quot;&gt;caption&lt;/code&gt; el link.&lt;/p&gt;
&lt;p&gt;Con todo ello, es tan sencillo como lanzarlo y comenzar a buscar piso.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c7f463628662091337632d0c32a84f79/afd0b/telegram_bot.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 108.86075949367088%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAEkUlEQVQ4y32TeUzTZxjHf38JBlgGSG9LOXrRE8oxaDcEa2lLy1VoC0i5xXC4BQNjHHI7dYdLZhQ1HE4YIAphyOFk4MaA6JItWbIlmzqiHNL+etpKT2Av4EayLD755v09efN83/d9Pu/7g8g8cXZ29aOyU0mCRC5fyI6IpjA5VFb4G0QLjWRFxIARIpDpMeyIWqGUExpJpLGDKYygNwoUBFMZpBAWkcqEUCicLxLr7os8hMSCHIU+DIRE4f5fSAwCgUYgsX4IkGCgnWoUDrM77pnRGDwG64/BEbD/EdafRA+jcrhkGovCCAuisiAcPiiYTA8ihgSRaMEkun8AGcyAtb19/Lx9EHvy2Uu8/XABxEAqK5AUAs5PINEgTmRMYrJMLE3jC6V8kTRBkiqRZUfx4sghLDqTA8RgcmiMMCAmO5wQQPTzQ4GlwZkRSAxUX1M13NdZWVp4obXu7JnqO7f6Hy89f7y0vLKuX9ca1zQGjc60DhvX1DqL1VFTU+fh6Q1aQKHxoEGo7sOqof6v2lvre3uudV65ODVxVwNrNLDaoNcZjQaDQa/X63Q62Gazbm9vNzY2e3i+vWve4QqdKiupLlLkvEcpk0QWiaNGB3u3NjctZpPZ8spssTjsNpfLYQcfux2Ym5tbD7h77pulSUlp4mNRFP8EDjmFF9reWH9/dm7i2+8mZ+YnZhYezD+am1+Ynp2bnJ1/sPhzUUk5IZAE7uK1GQBLVqhkqhPJWXnCtCy+JF2iyE+UFwjTc0UZeaL0XIFUJpKkHI2OOsbjMkLoNGY4uMvX5ob3854+vPP01+m+c6WtuUevtZ3+6/nq0rOVdY3hhcag1hrUupcmg+HPW5f+6P+iIjP1oJcv9t+dL9RXPBy9Otnz8dk8QWuecLjrkhrWrK6uaLUanV4Lw7BWp7PabDancwdYU4unl/d+z7Hc8By5+OQRVgr+rRIua/izJlC0w8gJwrW9G1tgxrUJkpbmtgNuHvvmaC4vOj4hlkxOIxMUEYy6fPntb6aGRsYGR+8NjE6PTc2MT94bHpscujs9Nv1jbmFJMIm2D4zH5clkcr5AIk1TCkVJ8QJJkrJAqigUy/MSFQWi9ByBBABLjQulHwll0EgkKiNsH1jH5Q4TvD538+IncZRKP6g7J2FNo19eVRvNVpNlw/hyw2ixW19trIx3r453nVYp3D2894F92tjwy8IPI+cqa7kBIjdopDxdazSu7QCDgWAtrFGvg9CZLaDnM01t/wDDozB4KIf/7u3zH7WI2V9KcKPFxCfXiwEeh90KgDkczj1gm1vbzl3azU0tbuCFHQ5AITEoJBpiE/xVseGySGqlhH659J0rVRkdPf3Xu2929Ax29AzdGBju/Xqg80bf1a7e7r4hZZaKSgtFo7HoYDaaGAZF8eKlyvwMVTE/+Xh8aoEwozC7qEJZUK4oLJfnl2WoTqYpVemZqmSZIiUjMywimkRhIg4hOHx5pPA49EHJiZ7zTX2ftz/5/befFhe/vz+19Gx57QWsV+tMRrPF6tywuRyuLYvZ7NrarK1vcD/oBWjTwH/Ojvgb+hooorqyCAgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Bot de Telegram&quot;
        title=&quot;Bot de Telegram buscando piso&quot;
        src=&quot;/static/c7f463628662091337632d0c32a84f79/f058b/telegram_bot.png&quot;
        srcset=&quot;/static/c7f463628662091337632d0c32a84f79/c26ae/telegram_bot.png 158w,
/static/c7f463628662091337632d0c32a84f79/6bdcf/telegram_bot.png 315w,
/static/c7f463628662091337632d0c32a84f79/f058b/telegram_bot.png 630w,
/static/c7f463628662091337632d0c32a84f79/40601/telegram_bot.png 945w,
/static/c7f463628662091337632d0c32a84f79/afd0b/telegram_bot.png 1153w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Tal y como queda me parece bastante elegante. Cogiendo el elemento entero como imagen se puede ver toda la información de un vistazo y poniendo el enlace se puede acceder al anuncio para obtener más información o directamente contactar con el anunciante. Otra opción podría haber sido coger el texto y haber creado una lista con los pisos y los enlaces, pero la primera forma me parece de las más elegantes y, sin duda, la más sencilla de todas.&lt;/p&gt;
&lt;h2&gt;Parte 3: crear un canal de Telegram para informar de los pisos&lt;/h2&gt;
&lt;p&gt;Sí, con esto no tengo suficiente. Escribir un comando al bot es demasiado trabajo. Por ello, a parte de tener el bot así, he añadido un metodo para que el bot, cada cierto tiempo, escriba en un canal las ofertas que hay. Esto es basicamente lo msimo que hace por ejemplo el &lt;a href=&quot;https://t.me/getmanfred&quot;&gt;bot de Manfred&lt;/a&gt; con las ofertas de trabajo, pero con mayor frecuencia. Además, me gusta como en ese bot no va dejando los mensajes de días anteriores, sino que solo está el último mensaje. Así evita que se llene el canal de mierda y deja que haya solo lo que tiene que haber. Por ello, yo lo he hecho igual.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update_channel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Get channel and bot info&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;token.txt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;channel_id.txt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        channel_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    bot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; telegram&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Bot&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# Remove previously sended messages&lt;/span&gt;
    stacked_messages &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sent_messages.txt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;r&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; line &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;readlines&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;line&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delete_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;channel_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; message_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# Scrap all with the defaul top price&lt;/span&gt;
    flat_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    flat_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;extend&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrap_idealista&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;top_price&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    flat_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;extend&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrap_fotocasa&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;top_price&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# Send the messages with the info&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Saves the message_id of the messages to be able to delete them on the next one&lt;/span&gt;
    stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;channel_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Kaixo! Hamen dauzkazu oraintxe bertan dauden pisuak:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; flat &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; flat_list&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_photo&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;channel_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; caption&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;flat&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;link&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; photo&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;flat&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;image&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_message&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chat_id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;channel_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hortxe dauzkazu!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;sent_messages.txt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;w&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; message &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; stacked_messages&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;write&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lo sé, esto no es lo más limpio que has visto en tu vida. Es basicamente más de lo mismo pero gestionando los mensajes que se han enviado. Cada mensaje enviado tiene un &lt;code class=&quot;language-text&quot;&gt;message_id&lt;/code&gt;, que es lo que permite despues poder elimiarlos. Esta función basicamente elimina lo que se haya escrito antes en el canal, realiza el scraping, manda la información y guarda los &lt;code class=&quot;language-text&quot;&gt;message_id&lt;/code&gt; para poder borrar los mensajes la próxima vez. Guarda esos id en un fichero para que, si peta el bot, no se pierdan y se puedan borrar al iniciarlo de nuevo, así no queda basura en el canal.&lt;/p&gt;
&lt;p&gt;En este caso, hace falta crear una instancia de &lt;code class=&quot;language-text&quot;&gt;Bot&lt;/code&gt; ya que no se recibe de ningun lado. Ademas de esto, es necesario tener el id del chat o canal en el que se quiera escribir. Hay muchos bots que permiten sacar esos id.&lt;/p&gt;
&lt;p&gt;La idea tener el script en ejecucion 24/7 y con ello el bot siempre listo. Por un lado, con los handlers escuchando, lo que se hace con &lt;code class=&quot;language-text&quot;&gt;updater.start_polling()&lt;/code&gt; visto antes. Por otro lado, hay que tener alguna manera para ejecutar la función &lt;code class=&quot;language-text&quot;&gt;update_channel()&lt;/code&gt; cada cierto tiempo. Para ello se puede usar &lt;code class=&quot;language-text&quot;&gt;schedule&lt;/code&gt;, una librería que permite programar tareas de manera sencilla. Para instalar, usar &lt;code class=&quot;language-text&quot;&gt;pip&lt;/code&gt; y listo.&lt;/p&gt;
&lt;p&gt;Para usarla para ejecutar &lt;code class=&quot;language-text&quot;&gt;update_channel()&lt;/code&gt; cada cierto tiempo, basta con añadir al final de la función &lt;code class=&quot;language-text&quot;&gt;init()&lt;/code&gt; lo siguiente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;schedule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;every&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hour&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;at&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;:00&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;do&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;update_channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    schedule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run_pending&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como se ve, es muy sencillo de usar y el código se explica solo. No hay que asustarse por el &lt;code class=&quot;language-text&quot;&gt;while True&lt;/code&gt;. El polling de los callbacks se ejecuta en otros hilos, por lo que esto no interfiere. Esto hace que se quede indefinidamente comprobando si tiene que lanzar alguna tarea.&lt;/p&gt;
&lt;p&gt;Con todo esto, ya solo queda dejarlo en algun lugar ejecutándose. Este tipo de cosas son perfectas para una Raspberry Pi o algo del estilo. También se puede meter en un VPS o en donde sea. Lo único que hay que tener en cuenta es que, o tenga pantalla, o se use alguna libreria como la mencionada para emularla. Además de que tiene que tener el navegador que se vaya a usar instalado.&lt;/p&gt;
&lt;p&gt;También se pueden añádir más sitios a los que hacer scraping, es facilmente escalable. En mi caso uso Idealista y Fotocasa, pero basta con añadir más funciones de scraping. Obviamente, cómo coger la informacion varía de sitio a sitio.&lt;/p&gt;
&lt;h2&gt;Conclusiones&lt;/h2&gt;
&lt;p&gt;Crear un bot de este tipo es una tarea sencilla, como se puede ver. Aquí la dificultad está en encontrar un piso decente que no cueste un ojo de la cara. Eso si que es difícil de verdad.&lt;/p&gt;
&lt;p&gt;Hacer un bot para obtener información actualizada de una puede ser muy util. Usar web scraping en vez de usar APIs tiene sus ventajas. Lo primero es que la mayoria de webs no tienen APIs, por lo que en esos caso no queda otra. En los casos en las que sí tienen, pueden estar limitadas. Lo bueno del web scraping es que te permite coger &lt;strong&gt;lo que tú quieras y como tú quieras&lt;/strong&gt;. Y que nadie os engañe; aqui, mientras no tires la web o extraigas datos de manera masiva, no hay delito.&lt;/p&gt;
&lt;p&gt;Espero haberme explicado bien y que si lees esto te pique la curiosidad para trastear con estos temas. Yo, por mi parte no voy a parar :)&lt;/p&gt;
&lt;p&gt;Por último, dejo aquí el &lt;a href=&quot;https://github.com/ander94lakx/pisu-bot&quot;&gt;repo de GitHub&lt;/a&gt; con el código completo. Como siempre, libre para que hagáis lo que queráis.&lt;/p&gt;
&lt;p&gt;Y recordad: &lt;strong&gt;&lt;em&gt;Scraping is not a crime!&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Pwnkit: Vulnerabilidad en Polkit (CVE-2021-4034) en 5 minutos]]></title><description><![CDATA[Otro nuevo CVE de los que han dado que hablar. El CVE-2021-4034 salió a la luz hace unos días y se ha esparcido como la pólvora. No es que…]]></description><link>https://ander94lakx.github.io/blog/2022-01-29-polkit/</link><guid isPermaLink="false">https://ander94lakx.github.io/blog/2022-01-29-polkit/</guid><pubDate>Sat, 29 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Otro nuevo CVE de los que han dado que hablar. El &lt;a href=&quot;https://nvd.nist.gov/vuln/detail/CVE-2021-4034&quot;&gt;CVE-2021-4034&lt;/a&gt; salió a la luz hace unos días y se ha esparcido como la pólvora. No es que yo pueda aportar mucho más al tema del que no se haya dicho ya, pero si que puede estar bien hacer un repaso esquemático al CVE y a como explotarlo (que es trivial).&lt;/p&gt;
&lt;h2&gt;¿Qué es polkit?&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/title/Polkit&quot;&gt;Polkit&lt;/a&gt; es una herramienta que permite controlar los privilegios en sistemas de tipo Unix. Puede controlar la forma en la que los procesos sin privilegios se comunican con procesos con privilegios.&lt;/p&gt;
&lt;p&gt;Esto es util porque hay muchos casos en los que interesa que un proceso interactúe con procesos privilegiados unicamente para determinadas acciones, pero que no pueda hacer otras. En vez de usar algo como sudo (que sería como “abrir todas las puertas y a ver que pasa”), con Polkit se puede controlar en mayor detalle este tipo de operaciones.&lt;/p&gt;
&lt;h2&gt;¿Cuál es la vulnerabilidad?&lt;/h2&gt;
&lt;p&gt;Polkit tiene una utilidad llamada &lt;a href=&quot;https://linux.die.net/man/1/pkexec&quot;&gt;pkexec&lt;/a&gt;. Esta utilidad permite ejecutar comandos como otro usuario o como root. Esta utilidad tiene una vulnerabilidad, ya que no parsea bien el número de parámetros que recibe y permite ejecutar variables de entorno como comandos (!).&lt;/p&gt;
&lt;p&gt;Entonces, según lo que se le pase como variables de entorno, se puede ejecutar código arbitrario. De ahí, se escala privilegios y se consigue permisos de admin, es decir, root.&lt;/p&gt;
&lt;h2&gt;¿Cómo se puede explotar la vulnerabilidad?&lt;/h2&gt;
&lt;p&gt;Obviamente, ya hay exploits para ello. Para ver lo fácil que es, se puede poner como ejemplo el exploit de &lt;a href=&quot;https://github.com/berdav/CVE-2021-4034&quot;&gt;Davide Berardi&lt;/a&gt;. Ponerlo a prueba es tan sencillo como clonar, compilar, ejecutar y win!&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/berdav/CVE-2021-4034
&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt;
./cve-2021-4034&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Y &lt;em&gt;voilà&lt;/em&gt;! ahí tenéis la consola con root.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/90ab5edaeb5e086079e4930dcffecd17/4c5bd/polkit-exploit.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABYUlEQVQoz3WRbW+DIBSF/dRMi1ZxRUVF8a0qCjR1Wf//L9uJzZYmax/IDSE53HMPTkwjxtgZi7EwDA+HwziO9/t927bbE9srnHRmbGCfbZxMiZB1WZZZlgkhiqJArXaklDjXdd00TZqm6BHtONMyjfOoVqW00kajbbcDI5TS4y+e5xFCfN9H/bt01EXNg9qu23W9WmO7tjVGW2vWdRmGAS7wCrolSRIEAQTkCaf+qiorhClzw/GOUmaEGbUaYznn8AwXMIwz+YdTfOf0EhU2z7es7HohdTfd+hlpbRB87Hg7L8TLsDSihXk9aqt1LQrsvm3QbZ5n5IfkHqO+ELdTq6xarJr02LRdUcpa9mXVnM8MeWLO0+lE3uCcdezLYyD904XEvIyz6ZNPqViqqkbPcOetWFoZ8IAkhPCjH9EgyoOIh3ERRRQ5Y2wE/lZMQ0qQBbb7+EGXHD3Ux9+6rvsyqgc/frJAPu1XMGQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Polkit exploit&quot;
        title=&quot;Polkit exploit&quot;
        src=&quot;/static/90ab5edaeb5e086079e4930dcffecd17/f058b/polkit-exploit.png&quot;
        srcset=&quot;/static/90ab5edaeb5e086079e4930dcffecd17/c26ae/polkit-exploit.png 158w,
/static/90ab5edaeb5e086079e4930dcffecd17/6bdcf/polkit-exploit.png 315w,
/static/90ab5edaeb5e086079e4930dcffecd17/f058b/polkit-exploit.png 630w,
/static/90ab5edaeb5e086079e4930dcffecd17/40601/polkit-exploit.png 945w,
/static/90ab5edaeb5e086079e4930dcffecd17/78612/polkit-exploit.png 1260w,
/static/90ab5edaeb5e086079e4930dcffecd17/4c5bd/polkit-exploit.png 1435w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;¿Qué sistemas son vulnerables?&lt;/h2&gt;
&lt;p&gt;Pues diría que prácticamente todos. Aquí no se libra ni el apuntador. Se &lt;a href=&quot;https://blog.qualys.com/vulnerabilities-threat-research/2022/01/25/pwnkit-local-privilege-escalation-vulnerability-discovered-in-polkits-pkexec-cve-2021-4034&quot;&gt;ha logrado explotar&lt;/a&gt; la vulnerabilidad en instalaciones por defecto de Ubuntu, Debian, Fedora, CentOS y muchas más distribuciones. Al fin y al cabo, teniendo en cuenta que es un componente que se encuentra en prácticamente todas las distribuciones Unix-like.&lt;/p&gt;
&lt;p&gt;Lo peor ya no es eso, sino que la vulnerabilidad lleva &lt;a href=&quot;https://gitlab.freedesktop.org/polkit/polkit/-/commit/c8c3d835d24fc4ce5a9c596c7d55d85a0311e8d1&quot;&gt;más de 12 años&lt;/a&gt; en el código (!). A mi, personalmente, esta es la parte que me asusta de este tipo de vulnerabilidades, las que llevan desde hace mucho pudiendo ser explotadas, por no poder saber hasta que punto se ha podido hacer uso de ella.&lt;/p&gt;
&lt;h2&gt;¿Cómo mitigar la vulnerabilidad?&lt;/h2&gt;
&lt;p&gt;Todo el mundo se ha puesto las pilas y han lanzado parches para ello, por lo que a estas alturas, con actualizar a través del gestor de paquetes debería ser suficiente para mitigarla.&lt;/p&gt;
&lt;p&gt;En el mismo repo del exploit que he mostrado hay una version simplemente para probar si se es vulnerable, que se puede probar de la siguiente manera:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; dry-run
dry-run/dry-run-cve-2021-4034&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Otra opción, en caso de que no se pudiera actualizar el sistema, por la razón que fuese (mala idea por cierto, hay que tener siempre actualizados los sistemas), puede ser desactivar el bit SUID de pkexec. Un &lt;code class=&quot;language-text&quot;&gt;chmod&lt;/code&gt; para eliminar el bit para todos:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; ug-s /bin/pkexec&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;De esta manera se impide que el exploit pueda escalar privilegios, aunque puede tener muchas consecuencias imprevistas (como en Half Life :)).&lt;/p&gt;
&lt;h2&gt;Conlusiones&lt;/h2&gt;
&lt;p&gt;A modo de resumen, os dejo unos puntos que me vienen a la cabeza tras ver una vulnerabilidad de este tipo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cuidad vuestras entradas, sobre todo en lenguajes como C y al tratar con elementos a mas bajo nivel.&lt;/li&gt;
&lt;li&gt;Nunca se puede estar completamente seguro. Siempre hay vulnerabilidades que no conocemos pero que pueden ser descubiertas por otros.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cuanta más gente este del lado de los buenos, más vulnerabilidades de este tipo se podrán descubrir y con mayor rapidez.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Imaginaos las consecuencias de que esto caiga en malas manos (y no solo hablo de cibercriminales ;)).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Así que ya sabéis, a actualizar vuestros sistemas!&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;h2&gt;¡Exijo más detalles!&lt;/h2&gt;
&lt;p&gt;Pues aquí los tienes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El &lt;a href=&quot;https://www.qualys.com/2022/01/25/cve-2021-4034/pwnkit.txt&quot;&gt;reporte original&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Artículo en &lt;a href=&quot;https://blog.qualys.com/vulnerabilities-threat-research/2022/01/25/pwnkit-local-privilege-escalation-vulnerability-discovered-in-polkits-pkexec-cve-2021-4034&quot;&gt;su blog&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;PD&lt;/em&gt;: explicaría en detalle la vulnerabilidad, pero creo que ya esta muy bien explicada en cientos de artículos y videos, y no me voy a creer mejor que ellos. Mi objetivo aquí era simplemente hacer un breve resumen de una vulnerabilidad que me ha parecido interesante.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Análisis de malware (I): cómo empezar a analizar malware]]></title><description><![CDATA[Estamos rodeados por malware. Todo el mundo ha tenido alguna vez un problema con algún tipo de virus o al menos conoce a alguien que lo haya…]]></description><link>https://ander94lakx.github.io/blog/2022-01-26-malware-analysis-1/</link><guid isPermaLink="false">https://ander94lakx.github.io/blog/2022-01-26-malware-analysis-1/</guid><pubDate>Wed, 26 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Estamos rodeados por malware. Todo el mundo ha tenido alguna vez un problema con algún tipo de virus o al menos conoce a alguien que lo haya tenido, al igual que conoce o trabaja en alguna empresa a la que le hayan atacado.&lt;/p&gt;
&lt;p&gt;Personalmente, el malware me parece fascinante. Lo que me fascina es la eficacia que estos tienen. Son cuidadosamente diseñados para cumplir con su labor y hay ejemplos tan sofisticados que es alucinante ver cómo a alguien se le ha podido ocurrir programar algo de esa manera para explotar una vulnerabilidad o utilizar ciertos tipos de mecanismos de evasión.&lt;/p&gt;
&lt;p&gt;Cada vez que veo una noticia de un nuevo ransomware, troyano o malware de algún tipo, siento curiosidad por saber como funciona. Suelo ojear los informes técnicos que salen de los ataques más sonados en búsqueda de más información y me quedo alucinado por los informes de los analistas. En parte, por las características de los casos que analizan y las formas en las que funcionan los malware, pero, por otra parte, por como son capaces de obtener toda esa información.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a55d2147e4ec2a0fa38a3889b62b2ebc/0a47e/wannacry.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD8ElEQVQ4yz2UWUxUdxTG59nG1gQr20BBUFahYm1tYtIqwaTVLtq0NgoVVKgtdWv70BcXhOAQxmEbNklppC0hpTKYWGNpHC1gDWuHmWEAWUaggIOMwLAUrPDruYPx4cs593//95zv+87JVRm/OMad1JM0n02n+Vw6f574mrrEZH4/eAjj0WNcjz+E4UACtQmJ3PjsMLcOp1B36Ah1Scn8IfmNT+MxHj9Nw7ffcSflGKosH1+q9++nz1BLb42BmvgEzqxaRXFcHFUpyVQlJQkS+SX5KFVHjlCZmMivKSlcO3mC2q9Sqdi7l7r8fFoMBu6W/4AqOyCA6rhdTDQ3M37vHtU7dpLm6UlTYyNt7e00NTXRYe6gra2Vzs5O7HY7s7OzzM/NMTc7x+KTJ8xOTvJkfh57SyuqS8EbqNgQzsObt3DcbqByUwzp3j60SEGz1YrJ9Ddmixmr5F1dXXTabHR0dLij0kA5N3WY+cfxELvZgkofFYEuwhP964HotwaRI7k2NAh7z30c4+M8HBvDOTHBwsICT58+dWN5aYnl5eXnWJKzJWBQKZgfFopGvVYKBaHbGECG14uc/kBNu6lFGPUIbPR0d9PX14drepqZmRlcLheTInNqaup5nF9cXCmo3xRFppc3eRJzIyLJ9FxH1nZvWpruuqW0i4+Kbw8GH9Db28uA5P39/QwODuJwOBgTBdPSaFkYDlmsqIpjtghDf7L8AsjyD0TjraYkcD1WGcJ9+bBb2HXaVrxSPFNgsVjcfvYp73tW2C/IcFYYRkaiDVlLXpQPuQLtRg8yI4Lp6bQyIt2Hh4dF1pRbpsJEweQzqQqcTifT8jwjUx7t6kaVF6J4uI786DCRvEE8fInjH3lR32jEZrVhNpmwDwwwOjLiHtC4TFOJY6OjPBp3uPNhke+aceHsH0BVtDmGi7LcOWHh6ELCuCg7WLBFjcVqondoiN4HdmxycWj8ESMTTsHjleh8zKhgemGRf2Xq/4mHLrmjKoyKRuPlRZavr/joh8ZHpPv585tWx52yMm6XlmIs1mMs1AlynkHH7eI8jEU51Jfqabx8mb/k7r38AlS54RGcDwwkQ60mw8ODC2vWSGFfWiu1/Fio50pBMYW7d1K01VeYv0LRm8GC9eRv9qdom8Rof86veoGLQuanjz9BlSOrci48nLTQMC5IwbTVq8lc9zKGb77kyqlTlKR8TuG7eyiJ3UX5ex9StP0tSt6OpXz3+5S9s4fCHbEUvLGN8n37uH7mrKzNa1vRyEF29KtoRWq22o9LQcHcyi0QKWXUZmRyNVPDTeUHcLWGnw8cxJCaSnt1NfUlJVzTZNH4fTlNFRU06HL5H17jVD73iFp6AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Wannacry&quot;
        title=&quot;Wannacry en acción&quot;
        src=&quot;/static/a55d2147e4ec2a0fa38a3889b62b2ebc/0a47e/wannacry.png&quot;
        srcset=&quot;/static/a55d2147e4ec2a0fa38a3889b62b2ebc/c26ae/wannacry.png 158w,
/static/a55d2147e4ec2a0fa38a3889b62b2ebc/6bdcf/wannacry.png 315w,
/static/a55d2147e4ec2a0fa38a3889b62b2ebc/0a47e/wannacry.png 600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Este tipo de informes son realizados por analistas de malware. A veces están dentro de los equipos de DFIR de una empresa, otras son organizaciones gubernamentales o militares y otras veces es un hacker cualquiera posteando en su blog sobre una muestra con la que está jugando. Lo que está claro es que cogen una muestra de un malware y la analizan. Es un campo fascinante que me llama mucho la atención porque mezcla disciplinas que me parecen muy interesantes. Mezcla informática forense con ingeniería inversa y conocimientos a bajo nivel de los sistemas. Es como el plato combinado perfecto.&lt;/p&gt;
&lt;p&gt;Últimamente he estado aprendiendo sobre esta area. Incluso hace no mucho realicé &lt;a href=&quot;https://github.com/ander94lakx/TFM_Doc&quot;&gt;mi TFM&lt;/a&gt; sobre ello. Para poder recolectar las cosas interesantes que he ido aprendiendo, he decidido escribir una serie de posts (y con ello retomar un poco este blog) sobre el proceso y algunas de las técnicas que se usan. Nno soy un experto en el tema, pero espero poder ayudar a quien lo lea y, por que no, a mi mismo al organizarme las ideas.&lt;/p&gt;
&lt;h2&gt;¿Qué es el análisis de malware?&lt;/h2&gt;
&lt;p&gt;El análisis de malware consiste en todas estas técnicas y procesos que permiten obtener información sobre cómo funciona un malware. El funcionamiento de cualquier programa, y por ello también el de un malware, depende de su código. Si se tuviera el código de un malware simplemente bastaría con examinarlo para conocer cómo funciona. En este caso no va a haber esa suerte. Lo mejor que podremos tener es algún tipo de código ofuscado o compilado, normalmente un binario.&lt;/p&gt;
&lt;p&gt;Hay muchos tipos de malware. Un malware puede ser ese pedacito de JavaScript que se te ha colado en esa web con el objetivo de minar crypto para alguien y, a cambio de ello, convertir tu ordenador en un radiador. Un malware también puede ser ese .exe que te han colado como activador para tu Office pirata. Según el tipo de malware, se analizará de una manera u otra.&lt;/p&gt;
&lt;p&gt;Yo en este caso me voy a centrar en malware para Windows y para arquitecturas x86 y x86_64. Si se piensa en ejemplos de malware, probablemente lo que más venga a la cabeza sean ejemplos para este tipo de sistemas y son los más comunes de encontrar.&lt;/p&gt;
&lt;p&gt;En esencia, analizar malware consiste en comprender el funcionamiento de un programa, pero sin tener acceso directamente al código fuente. Es como tener una caja negra e intentar entender como funciona: puedes abrirle las tripas para intentar sacar el código, puedes lanzarla y ver como interactúa dentro de un sistema o puedes coger y analizar la forma de la caja para obtener pistas sobre ella.&lt;/p&gt;
&lt;h2&gt;¿Qué se hace para analizar un malware?&lt;/h2&gt;
&lt;p&gt;Hay diferentes procesos y técnicas para analizar malware. Hay incluso procesos y metodologías que se pueden seguir y que estandarizan la forma de hacerlo. Aun con ello, analizar malware consiste, en esencia, en sacar información sobre él: cómo funciona, qué mecanismos tiene para evadirse, cómo y con quién ese comunica, qué mecanismos usa para persistir o propagarse, etc.&lt;/p&gt;
&lt;p&gt;Las técnicas que se utilizan para sacar esa información son diversas, pero todas ellas se pueden dividir, a grandes rasgos, en las siguientes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Análisis estático&lt;/strong&gt;: consiste en analizar información sobre el malware sin analizar su código ni ejecutarlo: metadatos, firmas, formato y secciones del binario, etc.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/684ecf8e18eee10a71837d2947f4281b/cb9f4/pe-bear.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABxUlEQVQozz2QTW7TQBSAp2YbqddgVRatuoILQLuhElyiPUOFYMMRqqg7QGJDRTeREqmA1CMkdpLanvHfeGzXnvH4J/5LzEuDePr0NDOab968h2zb9qjnPAULWBCGjDGRyq5bd/9jvd7y72TdtG1d15u+R6qmYoLrptlsNmmaeiyQRZFwAYgkklJIKdNUAGUhgaKQVZU7jjUajRAh2Gc+mH3fJ0limgZjj5BMneoP3haDYkzv75dnb7+/ef3t9OTL+3c/Li+vB4PnqGlqwzCyLAeZc26aukejxSLUVKqqVNP8+TzAZnT7c6ooHxH6hNAHRfl8cTHc3z9G0CchJI5jkIUQur60bV/TqDpzptMt6sxdzJ3JWDs+Gh4dXgGvXn49P78aDA4RiQmNvP4poLJlEcYC6oWuw1w38NwAMqWR4/iGgQ0d25YTJ2J4ffNMeYGWsftAvarri7aPEm4RAk/AeKAdmcmqXpVFDoPsunZH0zRQ5u7XHwXkUJZBuhJ1D0SxmBlTUQqLWFmWhWEos6wsCmgnh0VZgrlaVSCPx3d7ewdo9+HdtAXn2DXLpuQJFE/B54LnUFmm4MO2bduqquHmZPJbUQ7+AqbMxUSI7RA7AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;PE-bear&quot;
        title=&quot;Análisis estático con PE-bear&quot;
        src=&quot;/static/684ecf8e18eee10a71837d2947f4281b/f058b/pe-bear.png&quot;
        srcset=&quot;/static/684ecf8e18eee10a71837d2947f4281b/c26ae/pe-bear.png 158w,
/static/684ecf8e18eee10a71837d2947f4281b/6bdcf/pe-bear.png 315w,
/static/684ecf8e18eee10a71837d2947f4281b/f058b/pe-bear.png 630w,
/static/684ecf8e18eee10a71837d2947f4281b/40601/pe-bear.png 945w,
/static/684ecf8e18eee10a71837d2947f4281b/78612/pe-bear.png 1260w,
/static/684ecf8e18eee10a71837d2947f4281b/cb9f4/pe-bear.png 1903w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Análisis dinámico&lt;/strong&gt;: también llamado análisis de comportamiento, consiste en analizar la muestra mientras se ejecuta: ficheros con los que interactúa, llamadas al sistema, trafico de red, cambios en el registro, etc.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3719ac4e16056d99266dbb94e74a9824/22b88/wireshark.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.58227848101266%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAA6klEQVQY0x2Pi26DMAxF+f9fWl8UEkISEvIgIaZQ0FoK2z5ibqUj61xLlu2Mxbr0NO0JfoB4WieOriaNFJaUjvDEWWQiCQHCfbt+68MawxrCK2a546e2Mk+wK5xNlXtuHkBTS3t1UOTY0outT4ZdO1HGpowKaxEkRtKrrPAcZ9wL/DbklhUdR2egSZRHVWJHjFZMb+Tk6sHw8U19M3Ky2cXxg6btE8w64Am5F+jvzdB+NeRsmJyDuHt+92LumiXKBWOH6EfKJOBL9Pabxj+oYyUHjm5mbWdd2mvliR4bt+gPbb92sEfYPuzxH/LH9huFe/ZcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Wireshark&quot;
        title=&quot;Captura de tráfico de red con Wireshark&quot;
        src=&quot;/static/3719ac4e16056d99266dbb94e74a9824/f058b/wireshark.png&quot;
        srcset=&quot;/static/3719ac4e16056d99266dbb94e74a9824/c26ae/wireshark.png 158w,
/static/3719ac4e16056d99266dbb94e74a9824/6bdcf/wireshark.png 315w,
/static/3719ac4e16056d99266dbb94e74a9824/f058b/wireshark.png 630w,
/static/3719ac4e16056d99266dbb94e74a9824/40601/wireshark.png 945w,
/static/3719ac4e16056d99266dbb94e74a9824/78612/wireshark.png 1260w,
/static/3719ac4e16056d99266dbb94e74a9824/22b88/wireshark.png 2567w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;Análisis de código&lt;/em&gt;: como su nombre indica, consiste en observar el código y se distingue en dos tipos:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2920350229ea478f746f2e8628004964/e5085/ghidra.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABOUlEQVQY0z2Q107DMBSG8/6vhCoosxdtVMQIuKGZTpzROt6OnYFJgU//1dH5dIaHSpTnMEnipm2FEIQSyliv9eCwg9LKmF72SmppjLHWDguu6PDegxAc3h43m9X1+mq1Xt8+3N9tdv7e959f98HW94OPzxcQBACkeZFlLlkGyyhO0zT2bp58ynkBYYdxXNCkUAfQJlB+hTgMcZSwvLXlaYInm7U6aeQR0ajix5KjuvPiNB/GsaqQ2wqzIUUMNv2ZzmVjGqLrTndixmI+sbHlY0lUeqYZZogYwpQ3LyCELidBCKuKGDMSIpXijBOtzRIrZe9Onv+QUnqMMc65c+wCxriumZQ/rVprjM8YE9rx3jhzHAe35TBN06+8222jKAIALD80blZVcSFt37sYSmmHuRD6Ms1pru1f/gbxnobFYuHhKAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Ghidra&quot;
        title=&quot;Ghidra para análisis de código&quot;
        src=&quot;/static/2920350229ea478f746f2e8628004964/f058b/ghidra.png&quot;
        srcset=&quot;/static/2920350229ea478f746f2e8628004964/c26ae/ghidra.png 158w,
/static/2920350229ea478f746f2e8628004964/6bdcf/ghidra.png 315w,
/static/2920350229ea478f746f2e8628004964/f058b/ghidra.png 630w,
/static/2920350229ea478f746f2e8628004964/40601/ghidra.png 945w,
/static/2920350229ea478f746f2e8628004964/78612/ghidra.png 1260w,
/static/2920350229ea478f746f2e8628004964/e5085/ghidra.png 2325w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Análisis estático de código&lt;/strong&gt;: analizar el código sin ejecutarlo.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Análisis dinámico de código&lt;/strong&gt;: analizar el código mientras se ejecuta, es decir, depurarlo.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Como se puede ver, todo lo estático esta relacionado con analizar sin ejecutar, mientras que la parte dinámica tiene que tener el malware en ejecución. También se puede distinguir entre técnicas en función de si se analiza el código o no. Al analizar una muestra, lo normal es que se realicen algunos tipos de tareas antes que otras. Las técnicas de análisis estático suelen ser fáciles de realizar y suelen hacerse al principio. Por el contrario, analizar el código es una tarea tediosa y suele hacerse más adelante, Aunque todo ello depende del proceso y del analista.&lt;/p&gt;
&lt;h2&gt;¿Como empiezo a analizar malware?&lt;/h2&gt;
&lt;p&gt;Aquí no hay discusión, para analizar malware necesitas un entorno aislado. Coger malware y meterlo en tu ordenador para comenzar a trastear con él es mala idea. Si nadie quiere que se le cuele malware en su equipo sin querer, como para hacerlo a propósito.&lt;/p&gt;
&lt;p&gt;La mejor forma para tener un entorno aislado es hacer uso de una máquina virtual. Se puede usar lo que se quiera (VirtualBox, VMWare, …). En mi caso soy más de usar VirtualBox, pero cualquiera es perfectamente válido. Una vez se tenga el software de virtualización, hace falta crear obtener una ISO con Windows, crear la maquina virtual, cargar la imagen en… ¿O quizás no?.&lt;/p&gt;
&lt;p&gt;Es cierto que uno mismo puede buscar la ISO, crear la máquina e instalar Windows en ella, pero hay una forma más sencilla de obtener una VM con Windows, y es descargarla directamente de internet. La mejor opción son las VM que ofrece Microsoft para desarrolladores. Hay varias opciones. Se puede optar por una maquina que tiene un &lt;a href=&quot;https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/&quot;&gt;entorno de desarrollo completo&lt;/a&gt; (es más grande, pero si se quiere ademas usarla para desarrollar malware puede estar bien), o las máquinas virtuales que tienen &lt;a href=&quot;https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/&quot;&gt;para testear aplicaciones&lt;/a&gt; en Edge, más ligeras y, en mi opinión, la mejor opción. De estas últimas, ademas de Windows 10, también hay versiones para Windows 7 y Windows 8, que para malwares viejos puede ser interesante. Hay versiones para los software más famosos, como VirtualBox o VMWare, así que con seleccionar la version deseada, bajarse el archivo y cargarlo en el software de virtualización necesario es más que suficiente.&lt;/p&gt;
&lt;h3&gt;¿Qué herramientas necesito para analizar malware?&lt;/h3&gt;
&lt;p&gt;Con una máquina virtual ya lista solo hace falta prepararla con las herramientas necesarias para analizar malware. Hay una gran cantidad de herramientas para analizar malware. Algunas como IDA o Ghidra sonarán a muchos. Al principio es normal no tener ni idea de cuales instalar. Lo mejor para estos casos es hacer uso de &lt;a href=&quot;https://github.com/mandiant/flare-vm&quot;&gt;FLARE-VM&lt;/a&gt;, una herramienta para instalar y mantener actualizados todo un conjunto de herramientas para analizar malware.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/81219b49f7a2824efef3ff099ab9d36c/914ae/flare-install.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.62025316455696%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAA8klEQVQI12NYtXn/mi371287uHbLni17du09dnT34VN7j57fuu/0+l0noGjn8fU7T6zbeRyI1u44vmrr4WUbD5w8d5lByiIViORsMkSM4/n0g/j0A3n1gvl0o7l1YpjVIhgUwxiUwhiUw4GIUSWCURWEWDWiGGSDpszfwKBgna5sn6lom65om6ZgkylvnaVgmylrnaZgmyFvk6Fkl6lolwlUIGGWzKcXy6UTy60Ty68fz6AUOnXBBgZJ8xQZq1QZyzQp8xhpi1A56xgxk3gxkwRF2wwJ0yR+gwQho0RevTgu7RgmlQiIE5hUIxikAqYs3AgA6XhVYc6P6bsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Flare install&quot;
        title=&quot;Proceso de instalación de FLARE-VM&quot;
        src=&quot;/static/81219b49f7a2824efef3ff099ab9d36c/f058b/flare-install.png&quot;
        srcset=&quot;/static/81219b49f7a2824efef3ff099ab9d36c/c26ae/flare-install.png 158w,
/static/81219b49f7a2824efef3ff099ab9d36c/6bdcf/flare-install.png 315w,
/static/81219b49f7a2824efef3ff099ab9d36c/f058b/flare-install.png 630w,
/static/81219b49f7a2824efef3ff099ab9d36c/914ae/flare-install.png 860w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Con usar esta herramienta sobre nuestra máquina y dejarle un rato para que instale todo, tendremos una maquina con todas las herramientas que se necesitan. Es la mejor opción, sobre todo, para probar todo tipo de herramientas y ya, en un futuro, poder crearte tu propio laboratorio solo con las herramientas que te gusten. La única desventaja que tiene usar algo como FLARE-VM es que nos va a engordar nuestra VM considerablemente (unos 60GB de VM ya te deja). A parte de eso, es tan sencillo como seguir los &lt;a href=&quot;https://github.com/mandiant/flare-vm#windows-10-installation&quot;&gt;pasos de instalación&lt;/a&gt; indicados en su repositorio.&lt;/p&gt;
&lt;p&gt;También existen otro tipo de herramientas o directamente distribuciones que vienen ya con todo listo para usar. Una de mis favoritas es &lt;a href=&quot;https://remnux.org/&quot;&gt;Remnux&lt;/a&gt;, una distribución linux que viene prácticamente con todo. Tiene herramientas hasta para analizar malware para Windows. El único problema que tiene para analizar malware para Windows es que no vamos a poder ejecutarlo sobre esa máquina. Aun asi, es muy recomendable también.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4390a34195b25461bab8461044f13c64/7798c/remnux.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 72.78481012658227%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAlElEQVQoz2MQExOTkpKSlJQUQgKCgoKioqJAcSAJZKNJycvLy8nJiYuLM1AKGMkFDNQHQFOZYICBTgDiE2Vl5cDAQHsHRxdHO0VRXmI1MzMzA0lPT88Z06cXFBatWjTXVIYTbihRNktLSdqZ6hkb6Nqb6Ytzg7zNSD+fA8MZSDIzM9HYnoFIYQakA319fWNjYy8vLwCl2BzPHf9WGwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Remnux&quot;
        title=&quot;Distribucion Remnux&quot;
        src=&quot;/static/4390a34195b25461bab8461044f13c64/f058b/remnux.png&quot;
        srcset=&quot;/static/4390a34195b25461bab8461044f13c64/c26ae/remnux.png 158w,
/static/4390a34195b25461bab8461044f13c64/6bdcf/remnux.png 315w,
/static/4390a34195b25461bab8461044f13c64/f058b/remnux.png 630w,
/static/4390a34195b25461bab8461044f13c64/40601/remnux.png 945w,
/static/4390a34195b25461bab8461044f13c64/7798c/remnux.png 1183w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Si, aun así quieres instalar las herramientas a mano, te dejo algunas de las herramientas que me gustan a mí. Hay muchas mas, y esto depende de gustos y necesidades, pero a mí, algunas de las que me gustan son:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Para análisis estático:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.winitor.com/&quot;&gt;PEstudio&lt;/a&gt; y &lt;a href=&quot;https://github.com/horsicq/Detect-It-Easy&quot;&gt;DIE&lt;/a&gt; para analizar binarios.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://ssdeep-project.github.io/ssdeep/index.html&quot;&gt;ssdeep&lt;/a&gt; y &lt;a href=&quot;https://virustotal.github.io/yara/&quot;&gt;YARA&lt;/a&gt; (y las &lt;a href=&quot;https://github.com/Yara-Rules/rules&quot;&gt;Yara-Rules&lt;/a&gt;) para clasificar y buscar malware similar.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mandiant/capa&quot;&gt;capa&lt;/a&gt; para obtener de un vistazo pistas sobre las capacidades de una muestra.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Para análisis de código:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://hex-rays.com/ida-free/&quot;&gt;IDA&lt;/a&gt; para reversing y analizar código.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://ghidra-sre.org/&quot;&gt;Ghidra&lt;/a&gt; para cuando no puedas decompilar las muestras en IDA porque no te sobran miles de euros.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://x64dbg.com/&quot;&gt;x64dbg&lt;/a&gt; para &lt;del&gt;crackear videojuegos&lt;/del&gt; depurar muestras.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mejora mucho con &lt;a href=&quot;https://github.com/x64dbg/ScyllaHide&quot;&gt;ScyllaHide&lt;/a&gt; y &lt;a href=&quot;https://github.com/ThunderCls/xAnalyzer&quot;&gt;xAnalizer&lt;/a&gt;, dos plugins indispensables.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Para análisis de comportamiento:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://processhacker.sourceforge.io/&quot;&gt;Process Hacker&lt;/a&gt; y las &lt;a href=&quot;https://docs.microsoft.com/en-us/sysinternals/&quot;&gt;SysInternals&lt;/a&gt; de Windows, en especial &lt;a href=&quot;https://docs.microsoft.com/en-us/sysinternals/downloads/procmon&quot;&gt;Process Monitor&lt;/a&gt; para poder monitorizar y analizar procesos y eventos del sistema.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Los PML de Process Monitor son tu mayor aliado.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://sourceforge.net/projects/regshot/&quot;&gt;Regshot&lt;/a&gt; para capturar y comparar cambios en el registro.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.wireshark.org/&quot;&gt;Wireshark&lt;/a&gt; para capturar y analizar tráfico de red.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://belkasoft.com/es/bat&quot;&gt;Belkasoft Acquisition Tool&lt;/a&gt; para volcados de memoria&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Otros:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://mh-nexus.de/en/hxd/&quot;&gt;HxD&lt;/a&gt; como editor hexadecimal.&lt;/li&gt;
&lt;li&gt;Una taza con café al lado.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;¿Y ahora qué?&lt;/h2&gt;
&lt;p&gt;Con todo listo y preparado, solo queda buscar una muestra para empezar a jugar. Para no abrumarse demasiado, lo mejor es optar por muestras de malware que ya hayan sido analizadas y no sean demasiado complejas. En repositorios como &lt;a href=&quot;https://github.com/ytisf/theZoo&quot;&gt;TheZoo&lt;/a&gt; hay muestras de malwares famosos. También se puede buscar alguno concreto en plataformas como &lt;a href=&quot;https://bazaar.abuse.ch/&quot;&gt;MalwareBazaar&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Otra opción consiste en probar este tipo de herramientas y técnicas con crackmes. Un crackme es el equivalente a una máquina de Hack The Box o TryHackMe pero para reversing. No son específicos para analizar malware, pero las técnicas que se usan con, en esencia, las mismas. Webs como &lt;a href=&quot;https://crackmes.one/&quot;&gt;crackmes.one&lt;/a&gt; tienen muchos crackmes de diferentes dificultades con los que practicar.&lt;/p&gt;
&lt;p&gt;En los próximos posts explicare algunas de estas técnicas sobre una muestra de malware real para poder ver como se aplican las diferentes técnicas y como se usan las herramientas.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Cómo descargarse las imágenes de un perfil de Instagram con Python y web scrapping]]></title><description><![CDATA[Instagram es la red del postureo. Es probablemente la red social que más uso. Soy demasiado joven como para usar Facebook activamente y…]]></description><link>https://ander94lakx.github.io/blog/2020-04-25-instagram-bot-python/</link><guid isPermaLink="false">https://ander94lakx.github.io/blog/2020-04-25-instagram-bot-python/</guid><pubDate>Sat, 25 Apr 2020 16:33:00 GMT</pubDate><content:encoded>&lt;p&gt;Instagram es la red del postureo. Es probablemente la red social que más uso. Soy demasiado joven como para usar Facebook activamente y demasiado viejo siquiera para plantearme crearme TikTok (si veis que ocurre, os doy permiso para acabar con mi existencia). También uso twitter, pero más como proveedor de “noticias”, pero no publico nada en esa red social.&lt;/p&gt;
&lt;p&gt;Por lo tanto, todas mis publicaciones suelen ir a Instagram. A lo largo de los años me he dado cuenta de que se ha convertido en una especie de diario de hitos personales. Por encima de las fotos de mis viajes se pueden ver y observar fotos de cuando me saqué la carrera, de cuando vivía en Madrid y estaba en un estudio programando un videojuego o de buenos momentos con amigos. Aunque la calidad de las imágenes puede no ser la mejor, me gusta meterme de vez en cuando ahí y ver todos esos viajes y momentos.&lt;/p&gt;
&lt;p&gt;Aun así, soy informático y se que la única manera de que tu información pueda estar segura es tener tú mismo una copia. Por ello llevaba tiempo planteándome realizar algún script que me permitiera bajarme todas las fotos de mi perfil. También podia usar esto para refrescar un poco Python y practicar algo de Web Scrapping.&lt;/p&gt;
&lt;h1&gt;Web Scrapping con Selenium&lt;/h1&gt;
&lt;p&gt;Hace tiempo hubo un intento fallido por mi parte, principalmente porque intente descargar, &lt;em&gt;parsear&lt;/em&gt; y buscar las páginas a mano. El problema es que una página no consiste únicamente en un HTML, y hacerlo a mano implica ir “tirando del hilo” hasta obtener todos los recursos que componen una página. Por lo tanto lo deje aparcado. Eso hasta el otro día, en el que de pura casualidad encontré un &lt;a href=&quot;https://www.youtube.com/watch?v=d2GBO_QjRlo&quot;&gt;video&lt;/a&gt; en el que alguien programaba un bot para Instagram para ver la gente que le había dado unfollow. El objetivo que tenía me daba igual, pero quería ver como lo hacía.&lt;/p&gt;
&lt;p&gt;Al ver como lo hacia vi que utilizaba una librería llamada &lt;a href=&quot;https://www.selenium.dev/&quot;&gt;Selenium&lt;/a&gt;, que es una herramienta que permite automatizar un navegador. Es básicamente el santo grial del Web Scrapping, permite ahorrarte todo el engorro de realizar las peticiones, filtrar las páginas, buscar etiquetas, etc. Así que me baje el WebDriver para Firefox (es el puente que une la librería con el navegador), instalé la librería para Python y basándome en el video comencé a programar.&lt;/p&gt;
&lt;h1&gt;Loguearse en Instagram&lt;/h1&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3e1843296bd3fba0d59d13eab6d68f03/b4aee/ig-login.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 80.37974683544303%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAACE3AAAhNwEzWJ96AAADXklEQVQ4y4WUS28TVxTH/TVoy7KtRL8BX6GVumBXFu2iol0h6oIBVQotUkXaJiBeQUQVQZAEMAZFUcmiqqI6UeySqnn4kcT22JnxaxycZOyx5z2ef8+5xq5YVFzpr3tn5s5vzvmfcyfkOA7i8ThmZ2exsLCAVDqNVCqFTCaDw0MNXcOAaZpwXRe8l2fP84R4Pbg/UGh3dxfHjn2EI0feQfRpDFq7g1yhSOAstJYO03YJasK2bfDg2aCPWJYloAzp9XoIgkDAQ4VCHtHHM1BKElS1QZA2Diiyxl5TAFnVam0IbLVaWFlZweLiolAikRg+E8BcLo9vLo8jFl/DRnYbcqWCrbyE3xZeYDO9gT/+jGMjsyU2cxQcDYsjYyt8338zwlwuh4+/jCB84zGS6ynI6h7iyVVcuXwO34a/xqkzYbzcSMP3+t51u12RsvHaW06d4Qzm56Ht7R0c/+QkPj11nqJZhlIuoyTlsfz7M8Qe3cP84hIylIXr9l8yuh24ji2uefZoZnGUrkvAbDaLE599gbHbv2IlkUR2/W/syWk41j48swlDb0OpqXBsC4YToNiwIb9yUTnwUNn3IDdduvZgOj2RRWhnZwcXzpzG5K1bWF9bQ/RJFM+jTzBxcxx/xV/AJahSrcPmqvaAjhXAdIG24dHaR9cOoJs9eH5AKRMwXyjgx+8uYnLsqui9ufl5XBv7Gae/+hxzsUcEcQlYE17xYL80TYdlWuh02EuT7gb/VZk9m3v2HOuJJerBNl6uriJG/VjMFyAVFQIGqNXrQ6Dn+egYFtp6V8hxPFHhYZVLuzLmolEUqDj1Wg1lpYy8pGCvqUGRZTLbR43uc0XZ+H6b+MNTwtcD9Ru7WMIPl77H5N071B7baFTz0OtraDWytMkTUamqKoAcBTcxtw5HzNJ0BzZF2a8yASUC3r4+jn9WE9jKFVGWc1DLaTRVSUAMowtFUcT6bUOcZUkq4N33juL9Dz7E8tISHbsWlEodxZIijlxFqCq+zkWbmpoSmpmZwf2HD3B/6h4mJu5gc3NTQEMc9vT0NEZHRyFJRUrHQHP/AFXy7VDTxNlukTilZDKJkZERRCIR2v8Troz9gsi5swiHw+KPJYD85cHgdZsqzdIIxj8CXdeFV4MC/N9gfznlfwFdnXwGhsUSnwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Web de login de instagram&quot;
        title=&quot;Web de login de instagram&quot;
        src=&quot;/static/3e1843296bd3fba0d59d13eab6d68f03/f058b/ig-login.png&quot;
        srcset=&quot;/static/3e1843296bd3fba0d59d13eab6d68f03/c26ae/ig-login.png 158w,
/static/3e1843296bd3fba0d59d13eab6d68f03/6bdcf/ig-login.png 315w,
/static/3e1843296bd3fba0d59d13eab6d68f03/f058b/ig-login.png 630w,
/static/3e1843296bd3fba0d59d13eab6d68f03/40601/ig-login.png 945w,
/static/3e1843296bd3fba0d59d13eab6d68f03/78612/ig-login.png 1260w,
/static/3e1843296bd3fba0d59d13eab6d68f03/b4aee/ig-login.png 1823w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Lo primero que hay que hacer es hacer &lt;em&gt;log in&lt;/em&gt; en la página. Para ello, lo que hay que hacer es lo siguiente&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Obtener la web. Al no habernos logueado, la web que aparecerá será la de login&lt;/li&gt;
&lt;li&gt;Obtener los campos de usuario y contraseña y llenarlos&lt;/li&gt;
&lt;li&gt;Pulsar el botón de &lt;em&gt;Log in&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Todo ello se hace en Python de la siguiente manera:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;InstaBot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; webdriver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Firefox&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;executable_path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;./geckodriver.exe&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; username
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://instagram.com&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;    
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;//input[@name=\&quot;username\&quot;]&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;\
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_keys&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;//input[@name=\&quot;password\&quot;]&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;\
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;send_keys&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pw&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//button[@type=&quot;submit&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;\
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;//button[contains(text(), &apos;Ahora no&apos;)]&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;\
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como se puede ver, he metido el código en el constructor de una clase, que es la clase donde voy a implementar todo. Está en el constructor porque, independientemente de lo que se quiera hacer, es necesario realizar ese login. Los &lt;code class=&quot;language-text&quot;&gt;sleep()&lt;/code&gt; son necesarios ya que hay que dejar tiempo para que cargue la página.&lt;/p&gt;
&lt;p&gt;Si se ejecuta eso, se ve que en realidad es el mismo proceso que realizaría cualquiera para meterse en Instagram, solo que automatizado. Incluso se puede ver en directo en el navegador aislado que abre el WebDriver. No voy a indagar en cada función, ya que creo que los nombres son muy explicativos y es fácil comprender que esta haciendo cada una.&lt;/p&gt;
&lt;h1&gt;Obtener todos los posts&lt;/h1&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/e8212/ig-posts.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAACE3AAAhNwEzWJ96AAAEfElEQVQ4yx2UazTVWRjG/x9mPrRmlpku0zSXLqaRmRRlEqU0qpEYKemEKFTEEYkZ06xJU7qNy3E0TrkkU5NLRSkpEiJdkMuhRe51WplEdMU5B7/5H3utZ+213v0+z/Ou9917C6/6+2lpbuZlby+6NTIywvCwDsNj0Gg0DA4OMjQ0hEatHouNjo6O5b1//563Iu/dmzf09fXR09ODoCOMjIyOJQ4NiUSRrBPoF43Uag0DA0OoNcMMDmnQaIfRimZv374ZM9JqdTGtmKceM9RB6OnpJftiFrV1St4NahlUj9D55Bkdne20NRbzqC6P9rrLnI7ZSeg2W+KOhvFE1YWy/hFtbZ28fvUatSikK0grigs1NVUcjggjJSkOeXQUEQcikCuSyLt2CVVFJC1FQbxsiiUn2h5v608I3rKSu3fvU1R8h8rKGkpLSqhvaKYgv4jmpiaEspJ8fg/dzqF9IURIN7Nu6Q94uLtQXJhLS95OGi+sobsqkI4b3viv/oIAdxvOZWYgizpMUoKCsNBgZDExbPXcIooXI1zPy8FNYs/unduQblyDv8QBL08f0s+kkibz4i+pGcm7FpK+dymrTMfhKVlGwvF4nJ3WsslFwvp1jjistsNqiSWFNwoRim+V8kf4nySlpLDB2ZnFZmYYmViSciqZYG9rls7TY/2yr1hpOhGDLwW83VYQK5Mxx8QQB0drbGwtWGVriYHhDG4W3kRoammhqKycsxnnWLBQdzCbqdNnEq+Iw8FuLgvmfIzt4imYz53AvFnj2CSxQR5/EDvJbFx9zUVY4OZngYOrCbfK8hGUylqyz2dwKSsTRVwMifFyjskiqaq4Jza7nqqqCupqq8W9ktvld8RYI7fvlKBIkJF0UkFicvwYTiTG0twqDiVeHs0UvQ/47uvxmOh/hsk3k5k2/kNOJZ6gu2+Y6noVBaX1tKv6edj8nGfPB9i7dz+TJk5iloEB06fNQF9fHz298WRlZSPUVpazy8eFeYbTsDCaisOSWRjPmMCp5ES6XgxwKbeUg5GJdKh6qKxppe1xL/HyKJaYfot06wZ2bHHCx9WeFZbzycu7KvZQeY/9u91x/NEIDzsjXGwM8XQ0p6w4n46nfeQWVHBEfoZqZSu1DZ08au8mIzmWIFcrgjbZ4u/yE4HudgRvXs2DeyXiPbx5lbUrzXGymonnz8b4uVlxKFSCsrIUZdNTDstSCQk/hjTkCOnZRTS19XDh5FHC3Objs24RPusXEei2HA97M4oLchGqy/P51cuaPV4W+DrNYbfLbPyc53Plwmk2e0qxlezCJyQSD799bPTeg/zvVCJ+k2I8WWC58RSMpn6E6cxP+f5zges5mQitTXX8mxRF9JFwQoICCAn0J8B3O1dyLnI8IRnFyfP8k3mNtKx8kk9nk5aZzZWsNI7tlxJ7IJjgAF9+CdyBIvYgHW3ilJ/918vDRhXtHd08VvWKD7+X1vYuup73oWzt5n7DEypE3K9/TOmDVhraXpCWkY5CEcPli2fJz80kNfUE0eFB4idyl/8BShx3H52Lb/QAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Posts de Instagram&quot;
        title=&quot;Posts de Instagram&quot;
        src=&quot;/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/f058b/ig-posts.png&quot;
        srcset=&quot;/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/c26ae/ig-posts.png 158w,
/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/6bdcf/ig-posts.png 315w,
/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/f058b/ig-posts.png 630w,
/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/40601/ig-posts.png 945w,
/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/78612/ig-posts.png 1260w,
/static/cb99ba5e05a3d32f6de2a5f5de23d0e8/e8212/ig-posts.png 2239w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Una vez hecho eso, mi idea era ir a la página del perfil, coger cada enlace a cada post y de cada uno coger la URL donde se encuentra la imagen. Este es un proceso que ya he hecho a mano, por lo tanto se que las imágenes de Instagram se pueden coger si vas inspeccionando el HTML en búsqueda de la URL de la imagen, la URL de un post suele ser algo así, que esta en la etiqueta &lt;code class=&quot;language-text&quot;&gt;&amp;lt;img&gt;&lt;/code&gt; anidada por varios &lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6f23817dc4c6d4ac55900e302034e8b9/7ca1f/ig-image-post-url.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAACE3AAAhNwEzWJ96AAABfklEQVQoz32S627TQBCF8/6PgECItEj0HzwEpJVSpAZQRCkpJQ252I73Zu96nfhj7OCoXMpIR7Nr+Zy5nB2kuiD7kbNNDdZGClMJIkZVJHmJtp4i7DBlJBSRSrJ1BSEEmqahjT63MfCxJs0C2aYgWWt0aqlcRRSir0RA0JMO6G5HgYdinSDNnrV0pVYli6VimQdMZijKQIzVP4ntsS/we7FGBCWqGElS6XJZ8n2+ZbHRGBdR0mlmZOSi+Iv4GAa/apIJ2a08m7VlvnQs1orSBpytMNZQP+j2fzE4vSw5vfQMx46XbxWvBC8EZyPDG/n2WnA21gwvNM8vCobnjmcjy5N3lqcjx8m45EQ02txqDULd0CLuGlaJZzLdMpkprq9zJl8VV18U7z/nfLzNmd5pZnPLp2+aq5nmw61mOnfcy5qSm3t5JaEf+TB2knvyrSdVAtldmjtsWXdPxvvArt51/h7M6Jxhvz/k48i9U76qO3L73/7oYPPorpo/zr0pPwHr8LKpplI35QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;URL de la imagen de un post de Instagram&quot;
        title=&quot;URL de la imagen de un post de Instagram&quot;
        src=&quot;/static/6f23817dc4c6d4ac55900e302034e8b9/f058b/ig-image-post-url.png&quot;
        srcset=&quot;/static/6f23817dc4c6d4ac55900e302034e8b9/c26ae/ig-image-post-url.png 158w,
/static/6f23817dc4c6d4ac55900e302034e8b9/6bdcf/ig-image-post-url.png 315w,
/static/6f23817dc4c6d4ac55900e302034e8b9/f058b/ig-image-post-url.png 630w,
/static/6f23817dc4c6d4ac55900e302034e8b9/40601/ig-image-post-url.png 945w,
/static/6f23817dc4c6d4ac55900e302034e8b9/78612/ig-image-post-url.png 1260w,
/static/6f23817dc4c6d4ac55900e302034e8b9/7ca1f/ig-image-post-url.png 1890w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Pero antes de llegar a eso, es necesario coger los enlaces a todos los post, para poder buscar el enlace de la imagen para cada uno de ellos. Los enlaces de un post de Instagram tienen el formato &lt;code class=&quot;language-text&quot;&gt;https://www.instagram.com/p/B--N-oBKdPL/&lt;/code&gt;. Para cogerlos, una vez llegados la página del perfil, hay que ir bajando abajo e ir buscando estos enlaces. &lt;/p&gt;
&lt;p&gt;Mi idea inicial era hacer scroll hasta abajo del todo y después buscar todos los enlaces. El problema es que la página de perfil solo mantiene un número de post cargados en el grid y, a medida que se va bajando y se va cargando nuevos, los anteriores desaparecen. En mi experiencia suele mantener cargados en torno a 30. Por lo tanto, lo que habría que hacer es hacer scroll e ir cogiendo los enlaces. Para ello he creado la función &lt;code class=&quot;language-text&quot;&gt;get_pictures_links()&lt;/code&gt;, que contiene lo siguiente:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_pictures_links&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;//a[contains(@href,&apos;/{}&apos;)]&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;\
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    links &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    last_height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_script&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;return document.body.scrollHeight&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_script&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;window.scrollTo(0, document.body.scrollHeight);&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        links_elements &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_elements_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//a[contains(@href,&quot;p/&quot;)]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; elem &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; links_elements&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            links&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;elem&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attribute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;href&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        new_height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;execute_script&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;return document.body.scrollHeight&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; new_height &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; last_height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
        last_height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; new_height

    links &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;links&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; links&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hay varias cosas a resaltar en el fragmento anterior:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;El scroll se hace mediante JavaScript. Para ejecutar código JavaScript en la web se usa la función &lt;code class=&quot;language-text&quot;&gt;execute_script()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;El contador de altura sirve para saber cuando hay que parar de bajar. Si al bajar sigue en la misma altura del final se para&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Para buscar los enlaces a los post hay que buscar las etiquetas &lt;code class=&quot;language-text&quot;&gt;&amp;lt;a&gt;&lt;/code&gt; correspondientes. En este caso se busca una etiqueta de enlace que contenga &lt;code class=&quot;language-text&quot;&gt;/p&lt;/code&gt; en el atributo &lt;code class=&quot;language-text&quot;&gt;href&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Una vez obtenida la etiqueta o, como en este caso, la lista de etiquetas que cumplen ese criterio, se obtienen los atributos en sí, que son las URL que queremos. Estas se guardan en la lista.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Por como funciona el grid, lo normal es acabar cogiendo valores repetidos, ya que las etiquetas se van descargando al cabo del tiempo, pero se mantienen durante varios scrolls. Por lo tanto, al final del todo, se hace el &lt;code class=&quot;language-text&quot;&gt;list(set(links))&lt;/code&gt; para eliminar duplicados (se pasa a un set, que no puede contener repetidos, y después a una lista para dejarlo como antes). Hacer eso deja los elementos desordenados, pero en este caso no importa. De las soluciones que he encontrado en &lt;a href=&quot;https://stackoverflow.com/a/7961393&quot;&gt;StackOverflow&lt;/a&gt;, esa me parecía la más limpia y apta para este caso.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Obtener los &lt;em&gt;permalinks&lt;/em&gt; a las imágenes&lt;/h1&gt;
&lt;p&gt;Con todos los posts, no queda más que ir uno a uno, para abrirlos y buscar las imágenes que contienen. Para ello, he creado la función &lt;code class=&quot;language-text&quot;&gt;get_picture()&lt;/code&gt;, a la que le voy pasando cada uno de los links que previamente he obtenido y busco la imagen para descargarla.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_picture&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; link&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;link&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sleep&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        img_element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_element_by_xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//img[contains(@class,&quot;FFVAD&quot;)]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img_element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attribute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;src&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        time_element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;driver&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;find_elements_by_tag_name&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;time&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        timestamp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; time_element&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attribute&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;datetime&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; url &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; timestamp &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            timestamp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;-&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            timestamp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;-&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            urllib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;urlretrieve&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timestamp &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.jpg&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Obviando que no trato la excepción (y debería), aquí es donde realmente ocurre la magia y donde hay más problemas. De momento la forma más sencilla que he encontrado para obtener la etiqueta que contiene la imagen real, es buscarla mediante su clase. Los nombres de todas las clases que se usan en el HTML de la web de Instagram están ofuscados. Pero, basándome en las pruebas que he estado realizando, estos no cambian en el tiempo, por lo tanto usando ese nombre de clase. Una vez sabiendo cómo hacerlo, es muy fácil encontrar con Seleniun la etiqueta y obtener la URL.&lt;/p&gt;
&lt;p&gt;Además, para poder guardar las imágenes también obtengo el timestamp de cuando se publicó el post. A partir de ahi, no hace falta mas que descargar la imagen con &lt;code class=&quot;language-text&quot;&gt;urllib&lt;/code&gt;.&lt;/p&gt;
&lt;h1&gt;Conclusión&lt;/h1&gt;
&lt;p&gt;El bot tiene muchas partes con margen de mejora. Hasta ahora no he hablado de los post que contienen un video ni de los post que contienen varias imágenes. Iré mejorándolo con el tiempo, pero creo que tal y como esta es una buena herramienta para entender como hacer Web Scrapping a nivel básico. Voy a dejar el código en un &lt;a href=&quot;https://github.com/ander94lakx/InstaBot&quot;&gt;repositorio de GitHub&lt;/a&gt;, donde se irán pudiendo ver dichas mejoras.&lt;/p&gt;
&lt;h1&gt;¿Y la API de Instagram?&lt;/h1&gt;
&lt;p&gt;En este punto quizás alguien se plantee por que hacer todo esto y no usar directamente la API de Instagram. Por un lado, se que hay una nueva API, pero no la conozco. Mi objetivo es intentar hacer lo mismo que hace esta herramienta pero con dicha API. La que conozco es API anterior, la cual me parece limitada y pronto quedará en desuso.&lt;/p&gt;
&lt;p&gt;Aun así, el objetivo de este bot es no depender de si Instagram te va a permitir obtener dichas imágenes o no. Al fin y al cabo, una vez habiéndote logueado en la aplicación, técnicamente se pueden coger todas las imágenes que quieras, por lo que deberías ser capaz de hacerlo también de manera programática.&lt;/p&gt;
&lt;p&gt;Al final, no consiste en si Instagram te va a dejar o no, sino en: ¿si puedes, por qué no hacerlo?&lt;/p&gt;</content:encoded></item><item><title><![CDATA[No tenemos ni idea de cómo hacer teletrabajo y cómo podemos solucionarlo]]></title><description><![CDATA[Últimamente he estado leyendo varios artículos con respecto al teletrabajo. Parece que, ahora que la situación lo demanda, el teletrabajo es…]]></description><link>https://ander94lakx.github.io/blog/2020-04-11-covid-remote-work/</link><guid isPermaLink="false">https://ander94lakx.github.io/blog/2020-04-11-covid-remote-work/</guid><pubDate>Sat, 11 Apr 2020 16:33:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/384281129725ae6708e8de31928b051e/a8586/laptop-beer2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABhWiiaoiR/8QAGRABAAMBAQAAAAAAAAAAAAAAAgABEgMR/9oACAEBAAEFArVEaNrSM6P0zdz/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQMBAT8Bq6//xAAWEQEBAQAAAAAAAAAAAAAAAAAAETH/2gAIAQIBAT8BxH//xAAbEAACAQUAAAAAAAAAAAAAAAAAEQIBECExQv/aAAgBAQAGPwJdG6CjLAr/AP/EABkQAQEBAQEBAAAAAAAAAAAAAAERACFBgf/aAAgBAQABPyGBN9OOwxc/IAlmbml3uDN//9oADAMBAAIAAwAAABA/7//EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QLGwf/8QAFhEBAQEAAAAAAAAAAAAAAAAAABFR/9oACAECAQE/EMRL/8QAGhABAQADAQEAAAAAAAAAAAAAAREAMVFBIf/aAAgBAQABPxAqB0VNHC+YBPALvH4A7JDl5hHYW2yOBA4QPmf/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Trabajar desde casa&quot;
        title=&quot;Trabajar desde casa&quot;
        src=&quot;/static/384281129725ae6708e8de31928b051e/828fb/laptop-beer2.jpg&quot;
        srcset=&quot;/static/384281129725ae6708e8de31928b051e/ff44c/laptop-beer2.jpg 158w,
/static/384281129725ae6708e8de31928b051e/a6688/laptop-beer2.jpg 315w,
/static/384281129725ae6708e8de31928b051e/828fb/laptop-beer2.jpg 630w,
/static/384281129725ae6708e8de31928b051e/0ede0/laptop-beer2.jpg 945w,
/static/384281129725ae6708e8de31928b051e/a8586/laptop-beer2.jpg 1224w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Últimamente he estado leyendo varios artículos con respecto al teletrabajo. Parece que, ahora que la situación lo demanda, el teletrabajo es una forma de trabajo fundamental y necesaria. &lt;/p&gt;
&lt;p&gt;Algunos titulares claman que la situación actual ha hecho surgir &lt;a href=&quot;https://www.xataka.com/empresas-y-economia/coronavirus-ha-activado-mayor-experimento-teletrabajo-historia&quot;&gt;el mayor experimento de teletrabajo de la historia&lt;/a&gt; y razón no les falta. Aun así, no paro de ver que la mayoría de artículos que tratan el tema no son más que una suma de recomendaciones de aplicaciones para realizar tareas de manera remota o colaborativa online. Principalmente son listados de sugerencias sobre qué aplicación es mejor para realizar videoconferencias, las mejores aplicaciones de mensajería, de gestión de tareas, etcétera. Si se quiere tratar un tema como el teletrabajo con un mínimo de rigor se queda bastante corto.&lt;/p&gt;
&lt;p&gt;No soy la persona con más experiencia teletrabajando, ni mucho menos. Si ahora mismo realizo teletrabajo es más impuesto por la situación que porque las formas de trabajar de mi equipo o departamento estén adaptadas a ello. Precisamente por eso me gustaría matizar que el teletrabajo no consiste simplemente en el uso de una serie de herramientas, sino de una mentalidad y unas formas de trabajo determinadas que, en ciertos aspectos, difieren del trabajo en la oficina. Las herramientas lo permiten, claro que sí, pero de la misma manera que el comprarte una caja de herramientas no va a hacer que sepas montar un mueble, bajarte Slack y Zoom no va a hacer que puedas teletrabajar y ser igual de productivo. El teletrabajo requiere una “cultura” en tu equipo que no se puede implementar de la noche a la mañana, requiere de un cierto periodo de adaptación.&lt;/p&gt;
&lt;p&gt;Con esto no estoy diciendo que no se pueda teletrabajar y ser productivo si no se han implementado medidas de teletrabajo previamente. La situación nos ha obligado a adaptarnos y toca, queramos o no, experimentar con el teletrabajo. Con un experimento se pueden sacar muchísimas lecciones, tanto de los aciertos como de los fallos. El método científico da prácticamente el mismo valor a los fallos que a los aciertos, porque los fallos pueden aportar mucha información interesante. &lt;/p&gt;
&lt;p&gt;En mi opinion, y hablo con respecto a mi area de trabajo y mi entorno laboral, la cultura del teletrabajo es algo que está muy verde actualmente. No solo porque muchas empresas den opciones muy limitadas con respecto a la flexibilidad de horarios, ubicación del trabajador, etc. sino principalmente porque se sigue estando anclado a la forma de trabajar de la oficina, la de toda la vida.&lt;/p&gt;
&lt;p&gt;Debido a ello creo que este gran experimento que ha arrancado a marchas forzadas va a dejar muchos tropiezos. Y eso es bueno. Por ello, basándome en la experiencia personal y como veo la situación, mas que dar recomendaciones entre si usar Skype o Zoom y Trello o Jira, creo que tiene mayor importancia analizar los fallos que estamos cometiendo (por supuesto, soy el primero en incluirme) a la hora de trabajar. Por ello voy a enumerar algunos de esos fallos.&lt;/p&gt;
&lt;h1&gt;No tener horario&lt;/h1&gt;
&lt;p&gt;La flexibilidad laboral asociada al teletrabajo está muy bien, permite conciliar la vida profesional con la personal, algo que debería ser básico. Pero tener flexibilidad laboral no significa no tener horario. Ya seas de los de &lt;em&gt;9 to 5&lt;/em&gt; o de los que se personaliza más los horarios, es importante marcar en que horas se va a estar trabajando y en cuales no. Si no se marcan, se puede caer en la trampa de estar siempre “disponible”. Entonces es cuando los beneficios de la flexibilidad laboral se convierten en su contrario.&lt;/p&gt;
&lt;h1&gt;Coger siempre el teléfono&lt;/h1&gt;
&lt;p&gt;Estoy de acuerdo en que hay llamadas que hay que coger sí o sí, pero hay que poner límites. Ahora mismo, cuando ya no hay excusa para no coger el teléfono porque “no puedes ir a ninguna parte” es más importante que nunca dejarlo claro. En mi caso no me afecta tanto, pero si eres de los que recibe muchas llamadas por teléfono no me lo quiero imaginar. Básicamente no te permitiría mantener un mínimo de tiempo la concentración. De la misma manera que si estas muy ocupado en la oficina y alguien te va a preguntar algo, le dices de manera educada que “ahora no, que lo miras un poco más tarde”, se puede hacer algo similar ignorando temporalmente el teléfono.&lt;/p&gt;
&lt;h1&gt;No dejar las cosas por escrito&lt;/h1&gt;
&lt;p&gt;Esta es un clásico y ha sido un problema desde siempre, pero el problema se hace más visible en la situación actual. Resulta muy fácil recurrir a acercarte a un compañero y comentar algo con él sobre una tarea, tomar una decisión y no dejar eso por escrito. Otro de los errores comunes es el organizar algunos aspectos hablando con un compañero, y comunicárselo a otros en el mismo momento. A lo que quiero llegar es a que en la oficina todo el mundo se entera. Pero si cada uno esta en su casa trabajando no. En mi casa no escucho a ninguno de mis compañeros, por lo que de la conversación entre dos compañeros (que obviamente mantendrán por teléfono, Skype, etc.) no me voy a enterar. &lt;/p&gt;
&lt;p&gt;Esto puede hacer que, al final, para tener a todo el equipo conectado sea necesario un sinfín de llamadas o reuniones excesivamente largas. No se puede estar siempre al teléfono, pero hay que estar siempre informado. Para ello hay herramientas, como el mail o aplicaciones como Slack, para dejar las cosas por escrito. Cada sistema responde a una necesidad, y no es lo mismo Slack que el mail. Slack es muy buena herramienta para conversar y dejar conversaciones interesantes por escrito o pasar enlaces y recursos interesantes, entre otros. Así se evita la saturación del mail, el cual debería quedar relegado para asuntos más centrales, como comunicación con clientes o informes más densos, entre otros.&lt;/p&gt;
&lt;h1&gt;Las reuniones&lt;/h1&gt;
&lt;p&gt;Hay dos tipos de reuniones: las reuniones en las que realmente estás trabajando y las que no te apetece tener pero son necesarias para discutir aspectos que necesitas definir o aclarar para ponerte a trabajar. Las del primer tipo se llaman &lt;em&gt;workshops&lt;/em&gt;. Las del segundo tipo son las que pueden llegar a ser más tediosas. Hay que aclarar que este tipo de reuniones telemáticas no son algo nuevo y se dan con cierta frecuencia aun teniendo un trabajo presencial, pero precisamente por eso es necesario hablar de ellas. Cuando todas las reuniones tienen este formato entonces hay un problema.&lt;/p&gt;
&lt;p&gt;Sin entrar muy de lleno y por dar unas pinceladas, yo diría que las reuniones de ese último tipo deben ser claras, concisas, tener previamente definidos unos puntos a tratar y ser lo mas breves posibles. Esto, por supuesto, también se aplica a las reuniones presenciales. El problema reside en que, si no se tiene en cuenta ahora para las reuniones telemáticas, estas pueden llegar a ser mucho peores que las reuniones presenciales&lt;/p&gt;
&lt;h1&gt;Control de versiones&lt;/h1&gt;
&lt;p&gt;Esta es algo más concreta y solamente es aplicable a un tipo de teletrabajo específico, el desarrollo de software. El control de versiones ya se usa de por sí en prácticamente cualquier trabajo que involucre el desarrollo de software. Ahora bien, una cosa es usarlo y otra cosa es usarlo bien. En estos tiempos es donde se va a poner de manifiesto si se esta haciendo buen uso. &lt;/p&gt;
&lt;p&gt;Es muy sencillo cometer una serie de malas prácticas cuando estas con los compañeros en la oficina. Es muy sencillo coordinarte para ver si puedes subir unos cambios o no, o esperar a algún &lt;em&gt;commit&lt;/em&gt; de un compañero para subir tus cambios. También es más rápido pedirle a un compañero que haga un &lt;em&gt;hotfix&lt;/em&gt; sencillo ya que, si el esta tocando ese código, tú te evitas cualquier conflicto que se pueda dar en caso de subirlo tú mismo. Algunas de estas malas prácticas ya no se pueden realizar, por lo que para que no se forme el caos en el repositorio, tener una buena metodología de trabajo con respecto al control de versiones resulta esencial.&lt;/p&gt;
&lt;h1&gt;Conclusión&lt;/h1&gt;
&lt;p&gt;No soy un guru del teletrabajo, ni mucho menos. Aun así, basándome en mi experiencia con el trabajo en remoto y el presencial, lo mas importante que tenemos que aprender de esta situación, en la que el teletrabajo se vuelve una necesidad, es que es necesario mejorar muchos aspecto a la hora de trabajar en nuestro equipo de trabajo y con nuestros compañeros. Obviamente todas las herramientas posibles ayudan, pero lo esencial si queremos que el teletrabajo sea una herramienta para compatibilizar la vida profesional con la personal (y no solo un parche a corto plazo) es que debemos cambiar de raíz muchos aspectos de la forma de trabajar que se tienen actualmente en muchas oficinas y empresas.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Initial commit]]></title><description><![CDATA[Llevo años planteándome crear un blog. No se si es porque llevo 3 semanas encerrado en mi casa (y las que me quedan) debido a la cuarentena…]]></description><link>https://ander94lakx.github.io/blog/2020-04-04-presentation/</link><guid isPermaLink="false">https://ander94lakx.github.io/blog/2020-04-04-presentation/</guid><pubDate>Sat, 04 Apr 2020 15:01:24 GMT</pubDate><content:encoded>&lt;p&gt;Llevo años planteándome crear un blog. No se si es porque llevo 3 semanas encerrado en mi casa (y las que me quedan) debido a la cuarentena y me aburro bastante o si es que ahora estoy realmente dispuesto a ponerme con ello, pero aun así me he lanzado a la aventura.&lt;/p&gt;
&lt;p&gt;Para quien no me conozca, me llamo Ander Granado. Soy un chaval de Vitoria-Gasteiz de 25 años que estudió Ingeniería Informática y se dedica a programar software.&lt;/p&gt;
&lt;p&gt;Como he dicho, soy Ingeniero Informático e, incluso desde antes de empezar a estudiar, me gusta trastear con diferentes áreas dentro de este campo. Desde la programación, ya sea web, desktop, móvil, videojuegos, scripts o herramientas de cualquier tipo hasta cualquier otro campo como la ciberseguridad, el hacking, el mundo de Linux y cualquier cosa relacionada con la ciencia y la tecnología en general. No solo soy un programador informático, también me gustan otra serie de cosas como los jugar a videojuegos, vivir enganchado a Spotify, viajar, beber cerveza o algunos asuntos sociales o políticos, entre otros.&lt;/p&gt;
&lt;p&gt;Hay muchísimos temas que me gustan y de los que creo que puede ser interesante hablar, no porque crea que mis palabras u opiniones sean dignas de ser escuchadas, sino porque creo que es una forma interesante de generar una especie de “diario” personal. También puede servirme para practicar mi escritura y probar a escribir en otros idiomas, como inglés o euskera, por lo que no os asustéis si veis algo pobremente escrito en alguno de esos idiomas. Tambien quiero recalcar lo de “personal”. Esto es algo completamente personal, por lo que todo lo que ponga por aquí no representa más que mi punto de vista.&lt;/p&gt;
&lt;p&gt;Si te interesa en este blog puedes llegar a encontrar una de las siguientes tres cosas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Un proyecto abandonado nada más empezar por alguien que es demasiado vago como para escribir cuatro putas líneas con cierta regularidad&lt;/li&gt;
&lt;li&gt;Una serie de divagaciones desordenadas de un Ingeniero Informático trastornado&lt;/li&gt;
&lt;li&gt;Algunas opiniones interesantes y artículos sobre programación, hacking, sistemas, ciencia, tecnología, música o política&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Todo dependerá de lo vago que sea durante los próximos meses.&lt;/p&gt;
&lt;p&gt;Por lo que a mi respecta, muchas gracias por leerme y si te interesa, tengo una serie de redes sociales donde puedes seguirme. Tengo &lt;a href=&quot;https://www.instagram.com/andergranado/&quot;&gt;Instagram&lt;/a&gt;, donde subo principalmente fotos de mis viajes y de lo que leo (muy hipster, lo sé). También tengo &lt;a href=&quot;https://twitter.com/AnderGrM&quot;&gt;Twitter&lt;/a&gt;, que si no lo tengo abandonado, es lo que uso para enterarme de cosas nuevas del mundo del desarrollo, seguir a artistas, etcétera. Por último, aunque no es una red social, tengo &lt;a href=&quot;https://github.com/ander94lakx&quot;&gt;GitHub&lt;/a&gt;, donde tengo subidos algunos proyectos, desde cosas antiguas de la uni hasta alguna cosilla que estoy haciendo (como, por ejemplo, este mismo blog).&lt;/p&gt;
&lt;p&gt;Ondo ibili!&lt;/p&gt;
&lt;p&gt;P.D.: El blog esta hecho con &lt;del&gt;Jekyll&lt;/del&gt; Gatsby, que me parece una herramienta cojonuda para hacer un blog como este y poder hostearlo con GitHub Pages.&lt;/p&gt;
&lt;p&gt;P.D.2: El nombre del blog es simplemente una fusión bastante cutre del nombre de una canción de Lou Reed con la palabra byte.&lt;/p&gt;</content:encoded></item></channel></rss>