<!DOCTYPE html><html lang="es"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.dd4ef85770ea00bcd4f8.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-5xl:64rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-5xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:Montserrat,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--fontFamily-raleway:"Barlow",sans-serif;--font-body:var(--fontFamily-raleway);--font-heading:var(--fontFamily-raleway);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#dc078e;--color-text:#1a2c3d;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5;--color-background:#fefcf8;--color-link:#3e8ec8;--color-bg-highlight:#f3efe5}*,:after,:before{box-sizing:border-box}html{line-height:var(--lineHeight-normal);font-size:var(--fontSize-root);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{--color-background:#fefcf8;font-family:var(--font-body);font-size:var(--fontSize-2);font-weight:var(--fontWeight-medium);color:var(--color-text);background-color:var(--color-background);transition:all 1s ease 0s}body.dark{-webkit-font-smoothing:antialiased;--color-background:#202020;--color-text:#fefcf8;--color-text-light:#d1dce5;--color-heading-black:#dc078e;--color-heading:#dc078e}footer{font-size:var(--fontSize-1);padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);height:1px;border:0}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);margin-top:var(--spacing-12);margin-bottom:var(--spacing-6);line-height:var(--lineHeight-tight);letter-spacing:-.025em}h2,h3,h4,h5,h6{font-weight:var(--fontWeight-bold);color:var(--color-heading)}h1{font-weight:var(--fontWeight-black);font-size:var(--fontSize-6);color:var(--color-heading-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{line-height:var(--lineHeight-relaxed);--baseline-multiplier:0.179;--x-height-multiplier:0.35;margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{margin-left:var(--spacing-8);margin-right:var(--spacing-0);margin-bottom:var(--spacing-8);list-style-position:outside;list-style-image:none}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{color:var(--color-text-light);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6);border-left:var(--spacing-1) solid var(--color-primary);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{width:100%;margin-bottom:var(--spacing-8);border-collapse:collapse;border-spacing:.25rem}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.mb-0{margin-bottom:0}.d-flex{display:flex}.w-16{width:16px}.h-16{height:16px}.pl-12{padding-left:12px}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{display:flex;align-items:flex-end;border-bottom:2px solid;margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{font-size:var(--fontSize-4);color:var(--color-primary);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-weight:var(--fontWeight-bold);font-family:var(--font-heading);text-decoration:none;font-size:var(--fontSize-5)}.bio{display:flex}.bio-avatar,.bio p{margin-bottom:var(--spacing-0)}.bio-avatar{margin-right:var(--spacing-4);min-width:50px;border-radius:100%}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-size:var(--fontSize-2);font-family:var(--font-heading)}.blog-post-nav ul{margin:var(--spacing-0)}.blog-post-nav ul li.blog-post-nav-prev{margin-bottom:0;width:50%;text-align:left}.blog-post-nav ul li.blog-post-nav-next{margin-bottom:0;width:50%;text-align:right}.gatsby-highlight{margin-bottom:var(--spacing-8);font-size:1rem!important}.gatsby-highlight pre,.language-text{background-color:var(--color-bg-highlight)!important}.language-text{padding-left:10px!important;padding-right:10px!important;font-size:16px!important}@media (max-width:42rem){blockquote{padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4);margin-left:var(--spacing-0)}ol,ul{list-style-position:inside}}.pagination{display:flex}.pagination__prev{width:50%;text-align:left;text-decoration:none}.pagination__prev-link{font-size:26px;font-weight:700}.pagination__prev-link:focus,.pagination__prev-link:hover{color:var(--color-primary)}.pagination__prev-link--disable{color:grey;pointer-events:none}.pagination__next{width:50%;text-align:right;text-decoration:none}.pagination__next-link{font-size:26px;font-weight:700}.pagination__next-link:focus,.pagination__next-link:hover{color:var(--color-primary)}.pagination__next-link--disable{color:grey;pointer-events:none}.blog-list{list-style:none;margin-left:0}.blog-list .blog-list-item{margin-bottom:0;display:flex;align-items:center}.blog-list .blog-list-item .title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.copyright-text{width:50%;text-align:left}.footer-icon-group{width:50%;text-align:right}.footer-social-icon{display:inline-block;width:20px;height:20px;stroke-width:0;stroke:var(--color-text);fill:var(--color-text);font-style:normal;font-weight:400;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.footer-social-icon:hover{fill:currentColor}.current-page-info{display:flex;justify-content:flex-end;font-size:var(--fontSize-0)}@media (max-width:800px){.blog-list-item{display:flex;flex-direction:column}.blog-list-item a{width:100%;text-align:center}.header-link-home,.main-heading{width:70%;text-align:left}.header-nav-link{width:15%;text-align:right}.container{align-items:flex-start;width:15%}}@media (min-width:801px){.title{width:80%;text-align:left}.date{width:20%;text-align:right}.header-link-home,.main-heading{width:75%;text-align:left}.header-actions{display:flex;width:100%;justify-content:flex-end}.header-actions .header-nav-link{width:15%;text-align:right}}@media (max-width:350px){.global-header{flex-direction:column}.header-link-home,.header-nav-link,.main-heading{text-align:center;width:100%}.header-actions{display:flex;width:100%;justify-content:flex-end}.header-actions .toggle-button{margin-top:5px;margin-bottom:10px;width:100%;text-align:center}}.header-actions{display:flex;width:100%;justify-content:flex-end}.header-actions .toggle-button{width:40px;border:none;background:transparent none repeat scroll 0 0;cursor:pointer;outline:none}.header-actions .sun-moon:hover{opacity:1}.header-actions .sun-moon{height:22px}code[class*=language-],pre[class*=language-]{color:#f92aad;text-shadow:0 0 2px #100c0f,0 0 5px rgba(220,7,142,.2),0 0 10px hsla(0,0%,100%,.2);background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:transparent!important;background-image:linear-gradient(180deg,#2a2139 75%,#34294f)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8e8e8e}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.hexcode,.token.namespace,.token.number,.token.tag,.token.unit{color:#e2777a}.token.property,.token.selector{color:#72f1b8;text-shadow:0 0 2px #100c0f,0 0 10px rgba(37,124,85,.4588235294117647),0 0 35px rgba(33,39,36,.4588235294117647)}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.selector .token.id{color:#fdfdfd;text-shadow:0 0 2px #001716,0 0 3px rgba(3,237,249,.4588235294117647),0 0 5px rgba(3,237,249,.4588235294117647),0 0 8px rgba(3,237,249,.4588235294117647)}.token.class-name{color:#fff5f6;text-shadow:0 0 2px #000,0 0 10px rgba(252,31,44,.4588235294117647),0 0 5px rgba(252,31,44,.4588235294117647),0 0 25px rgba(252,31,44,.4588235294117647)}.token.constant,.token.symbol{color:#f92aad;text-shadow:0 0 2px #100c0f,0 0 5px rgba(220,7,142,.2),0 0 10px hsla(0,0%,100%,.2)}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector .token.class{color:#f4eee4;text-shadow:0 0 2px #393a33,0 0 8px rgba(243,159,5,.4588235294117647),0 0 2px rgba(243,159,5,.4588235294117647)}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#f87c32}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:100;src:local("Barlow Thin "),local("Barlow-Thin"),url(/static/barlow-latin-100-27a1352d60bc58ec3cc6c9419b349243.woff2) format("woff2"),url(/static/barlow-latin-100-f803774feb79678453e5395ca16ec08e.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:100;src:local("Barlow Thin italic"),local("Barlow-Thinitalic"),url(/static/barlow-latin-100italic-79b0e1ed0cb087b853c22692471cdcf4.woff2) format("woff2"),url(/static/barlow-latin-100italic-77aae2f6bc2fe621f6883df693bbeb43.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:200;src:local("Barlow Extra Light "),local("Barlow-Extra Light"),url(/static/barlow-latin-200-bac46e2af32b6a829910ecad1b3c5892.woff2) format("woff2"),url(/static/barlow-latin-200-a43ca4212d3cd58cc331946657494642.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:200;src:local("Barlow Extra Light italic"),local("Barlow-Extra Lightitalic"),url(/static/barlow-latin-200italic-9f03aa74fc6e01c0b77823c0a331f8e2.woff2) format("woff2"),url(/static/barlow-latin-200italic-8253a3ffe3003e4619b3cdd052a159f8.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:300;src:local("Barlow Light "),local("Barlow-Light"),url(/static/barlow-latin-300-f780d6f93676a9792d73405ad95cfbcc.woff2) format("woff2"),url(/static/barlow-latin-300-3b156c61aa15e6de7e887714aab88ea8.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:300;src:local("Barlow Light italic"),local("Barlow-Lightitalic"),url(/static/barlow-latin-300italic-f2d94c73c49cdd94db61532e5c59aa3d.woff2) format("woff2"),url(/static/barlow-latin-300italic-5621e8049d944313971a9360c534ceee.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:400;src:local("Barlow Regular "),local("Barlow-Regular"),url(/static/barlow-latin-400-0f9d3b560bae7d6283f13b731bc4f674.woff2) format("woff2"),url(/static/barlow-latin-400-90eaa4040ed022b8899840bf654f58b6.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:400;src:local("Barlow Regular italic"),local("Barlow-Regularitalic"),url(/static/barlow-latin-400italic-06ecc05a7b4f2f90ce64d3183b934287.woff2) format("woff2"),url(/static/barlow-latin-400italic-83ee73d6ea4f65df92bacc6bda95fa9e.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:500;src:local("Barlow Medium "),local("Barlow-Medium"),url(/static/barlow-latin-500-9c43f43c6a98e7a4c8f27827ff455c9f.woff2) format("woff2"),url(/static/barlow-latin-500-d72cf8511eff54dfb2a60d0a3000815e.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:500;src:local("Barlow Medium italic"),local("Barlow-Mediumitalic"),url(/static/barlow-latin-500italic-864fe9bb94f9c0a90e863680c2d49975.woff2) format("woff2"),url(/static/barlow-latin-500italic-50adbfda3243f3ddf8e6ed2b1a43a278.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:600;src:local("Barlow SemiBold "),local("Barlow-SemiBold"),url(/static/barlow-latin-600-9126e37748c1ee76d20fb783efef135b.woff2) format("woff2"),url(/static/barlow-latin-600-18a5c32500979a09c277d96daf1500d2.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:600;src:local("Barlow SemiBold italic"),local("Barlow-SemiBolditalic"),url(/static/barlow-latin-600italic-a7e86005aed21e121196f32f1bfdaa6e.woff2) format("woff2"),url(/static/barlow-latin-600italic-c8ef9c25a37b572bc78308774ad46ac4.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:700;src:local("Barlow Bold "),local("Barlow-Bold"),url(/static/barlow-latin-700-fa61eccc5d911d604a8739a7c9dc8bcb.woff2) format("woff2"),url(/static/barlow-latin-700-09fd7142cc6f5868c7a25d33775377bf.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:700;src:local("Barlow Bold italic"),local("Barlow-Bolditalic"),url(/static/barlow-latin-700italic-687db462348574d9464045c3fdd5a163.woff2) format("woff2"),url(/static/barlow-latin-700italic-c5f56eeaf81506abf1fea6e5b4b7795b.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:800;src:local("Barlow ExtraBold "),local("Barlow-ExtraBold"),url(/static/barlow-latin-800-cf173a0a766bcf5e806b47bc169ed61a.woff2) format("woff2"),url(/static/barlow-latin-800-85dcdeac1215c04c6ef55619388f688e.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:800;src:local("Barlow ExtraBold italic"),local("Barlow-ExtraBolditalic"),url(/static/barlow-latin-800italic-f4d1d64df4a1663b293cd19758e3677f.woff2) format("woff2"),url(/static/barlow-latin-800italic-cf5c9dafb35a9ad6c96cb0c0b6011a07.woff) format("woff")}@font-face{font-family:Barlow;font-style:normal;font-display:swap;font-weight:900;src:local("Barlow Black "),local("Barlow-Black"),url(/static/barlow-latin-900-03ccd4a420f4073d168c890d0dd8d08a.woff2) format("woff2"),url(/static/barlow-latin-900-362290234b93a06afcf26cd4e9cd8659.woff) format("woff")}@font-face{font-family:Barlow;font-style:italic;font-display:swap;font-weight:900;src:local("Barlow Black italic"),local("Barlow-Blackitalic"),url(/static/barlow-latin-900italic-6520e9e9b8a799d6f019d4bf1a3e89f3.woff2) format("woff2"),url(/static/barlow-latin-900italic-250f89c86b0fc0443166d85bffcf81b8.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=594fc1a610fded7bf7b631b3698bec5e" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=594fc1a610fded7bf7b631b3698bec5e"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=594fc1a610fded7bf7b631b3698bec5e"/><title data-react-helmet="true">Cómo automatizar la búsqueda de piso con un bot de Telegram | Walk on the Byte Side</title><meta data-react-helmet="true" name="description" content="El blog personal de Ander Granado, donde el susodicho cuenta sus mierdas"/><meta data-react-helmet="true" property="og:title" content="Cómo automatizar la búsqueda de piso con un bot de Telegram"/><meta data-react-helmet="true" property="og:description" content="El blog personal de Ander Granado, donde el susodicho cuenta sus mierdas"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="andergrma"/><meta data-react-helmet="true" name="twitter:title" content="Cómo automatizar la búsqueda de piso con un bot de Telegram"/><meta data-react-helmet="true" name="twitter:description" content="El blog personal de Ander Granado, donde el susodicho cuenta sus mierdas"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link as="script" rel="preload" href="/webpack-runtime-1d952a1521ddef540734.js"/><link as="script" rel="preload" href="/framework-8e528b732ab2eaadb7b7.js"/><link as="script" rel="preload" href="/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/app-0dddd4726be6c4290b5e.js"/><link as="script" rel="preload" href="/commons-84bff570f61dcb4d334d.js"/><link as="script" rel="preload" href="/031b090406d5e8a147bd800614ce20dc3d33dac6-c72667e68f0c784e3ff7.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-490f2d3369affb8652b9.js"/><link as="fetch" rel="preload" href="/page-data\blog\2022-02-05-bot-telegram-buscar-piso\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3810545343.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/916993862.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">Walk on the Byte Side</a><div class="header-actions"><a class="header-nav-link" href="/pages/about/">Sobre mí</a><button class="toggle-button header-nav-link"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+IDxzdmcgaWQ9IkxheWVyXzEiIGRhdGEtbmFtZT0iTGF5ZXIgMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjUgMjUiPjx0aXRsZT5Nb29uPC90aXRsZT48cGF0aCBpZD0iTW9vbiIgZD0iTTI0Ljg2LDE1LjUzYS41LjUsMCwwLDAtLjU3LDBBMTAuNzEsMTAuNzEsMCwwLDEsOS41Ny43OS41LjUsMCwwLDAsOSwwLDEyLjc3LDEyLjc3LDAsMSwwLDI1LDE2LC41LjUsMCwwLDAsMjQuODYsMTUuNTNaIi8+PC9zdmc+" alt="toggle theme" class="sun-moon"/></button></div></header><main><article itemscope="" class="blog-post"><header><h1 itemProp="headline">Cómo automatizar la búsqueda de piso con un bot de Telegram</h1><p>February 05, 2022</p></header><section itemProp="articleBody"><p>Estoy buscando piso y es un proceso de mierda. Hay una cantidad extrañamente escasa de pisos en mi ciudad y los que hay desaparecen rápidamente.</p>
<p>Me da pereza meterme todo el rato a buscar piso. En realidad no es algo tan complicado, pero a veces estoy ocupado y se me pasa mirar ese día, o estoy fuera y con el móvil es más engorroso.</p>
<p>Llevaba tiempo queriendo probar a hacer un bot de Telegram. No sabía que hacer exactamente, pero el otro día se me iluminó la bombilla. As que he creado un bot que me avisa de los pisos que hay en mi ciudad disponibles.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/ff41f125f3a3f618b3ef73d752e60669/0f98f/scraping_telegram_python_bot.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 59.49367088607595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB0JJNxYLlf//EABoQAAICAwAAAAAAAAAAAAAAAAECERIAAyL/2gAIAQEAAQUCmgd4FQc2Nwy3UsZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAEAIxcf/aAAgBAQAGPwLUCxdCBkjlf//EABoQAQEBAQADAAAAAAAAAAAAAAERACExQaH/2gAIAQEAAT8h8tD8zs7i57pkag90+AHtiRbv/9oADAMBAAIAAwAAABD4z//EABcRAQADAAAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8QpXY//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EDCf/8QAHBABAAIDAQEBAAAAAAAAAAAAAQARITFBcZGx/9oACAEBAAE/EAjeWijCEwzY3fhRGA1s7j9hIRbfkEpligdb+ThB1n//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Scraping Python Telegram bot"
        title="Scraping Telegram bot hecho en Python"
        src="/static/ff41f125f3a3f618b3ef73d752e60669/828fb/scraping_telegram_python_bot.jpg"
        srcset="/static/ff41f125f3a3f618b3ef73d752e60669/ff44c/scraping_telegram_python_bot.jpg 158w,
/static/ff41f125f3a3f618b3ef73d752e60669/a6688/scraping_telegram_python_bot.jpg 315w,
/static/ff41f125f3a3f618b3ef73d752e60669/828fb/scraping_telegram_python_bot.jpg 630w,
/static/ff41f125f3a3f618b3ef73d752e60669/0ede0/scraping_telegram_python_bot.jpg 945w,
/static/ff41f125f3a3f618b3ef73d752e60669/3ac88/scraping_telegram_python_bot.jpg 1260w,
/static/ff41f125f3a3f618b3ef73d752e60669/0f98f/scraping_telegram_python_bot.jpg 1920w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Esto tiene dos partes. Una es la parte de web scraping. Esto es básicamente automatizar la extracción de información de sitios web. Hoy en dia casi todo se hace desde internet y buscar piso no iba a ser menos. Prácticamente todas las inmobiliarias locales y los particulares que alquilan piso cuelgan sus anuncios en alguna plataforma como Idealista o Fotocasa, así que consultando ahí puedo ir viendo que opciones nuevas van apareciendo. Es básicamente lo que estaba haciendo hasta ahora a mano y sin la constancia suficiente. Automatizándolo con web scraping me permite obtener toda esa información de un vistazo.</p>
<p>La otra parte es la del bot de Telegram. Hasta hace dos días no tenia ni idea de como iba. Básicamente Telegram tiene una API cojonuda para poder hacer de todo con ella. Se pueden crear bots que se ejecuten donde sea para comunicarse directamente con los usuarios, escribir en chats o canales y realizar mil cosas. A parte, hay un <a href="https://github.com/python-telegram-bot/python-telegram-bot">wrapper para Python</a> muy bueno con el que se puede utilizar la API desde Python de manera muy sencilla.</p>
<h2>Parte 1: web scraping con Selenium</h2>
<p>No es la primera vez que hago web scraping. Hace tiempo hice un script que permitía scrapear instagram para descargar todas las imágenes de un usuario. Podéis echar un vistazo al <a href="https://ander94lakx.github.io/blog/2020-04-25-instagram-bot-python/">post</a> que hice o al <a href="https://github.com/ander94lakx/InstaBot">código</a> del bot (es un bot, pero no es un bot de Telegram, ojo).</p>
<p>Cuando hice ese script utilicé <a href="https://www.selenium.dev/">Selenium</a>, que es probablemente la mejor herramienta para web scraping que existe. No sirve solo para eso, pero permite automatizar el manejo de navegadores. Con esto lo que se puede hacer, es abrir webs, navegar por ellas, realizar acciones y extraer información de ellas programáticamente. Esto es mucho mejor que mandar directamente request con una librería para realizar peticiones, ya que al lanzar realmente una instancia de un navegador, se pueden saltar medidas que algunos sitios web tienen para bloquear mecanismos automatizados. La pega que tiene es que, al tener que abrir un navegador, no se puede ejecutar en un entorno que no tenga pantalla (aunque esto se puede solucionar fácil con librerías que simulan pantallas como <a href="https://pypi.org/project/PyVirtualDisplay/">PyVirtualDisplay</a>).</p>
<p>Con las herramientas listas e instaladas, solo queda usar Selenium para comenzar a hacer web scraping. En este caso lo simple es mejor. en vez de pasarle la URL base de un sitio de búsqueda de pisos, se puede sacar las URL con los parámetros para filtrar la búsqueda. En mi caso, y poniendo Idealista como ejemplo, la URL sería algo así:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">https://www.idealista.com/alquiler-viviendas/vitoria-gasteiz-alava/?ordenado-por<span class="token operator">=</span>precios-asc</code></pre></div>
<p>Como se puede ver, ya estoy filtrando por mi ciudad, a parte de que ordena por precio para que aparezcan los más baratos primero (no hay mucha pasta por aquí). Esto se podría acotar mucho más. Como la mayoría de sitios de este tipo usan los parámetros de búsqueda en la propia URL (algo muy útil para poder después guardar marcadores con ello), se puede ahorrar muchísimo trabajo de scraping solo con elegir la URL adecuada.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0e83e25c534428cbc1a9ce2e02db10bf/e8d8a/idealista_web.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 79.74683544303798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAB2HAAAdhwGP5fFlAAADwklEQVQ4y0WU228bVRDG/bfwgPoXUCHxlGfEAzwgEG88I1EpQANVAadpqrYhQaUp6U1AgbRqBaIvLWoLqiDKtWma1Inj2Fnbu16v7fVe7L3Z6/jH7KbASqOZs+fsd76Z+WYza3snWMyNoTgT1IJJNG8CVUyXWA/O/O/D0+jOt5TNq+y3LqNKXDEn2W1kxZ9ir56V706T8aOIsNfD9UOCqEfXc+h0bAYHPSBmOIw5GPYZJrEYDF5Ysu6LP3hhg3Q/025b6HqdRrOJ0WhIbFBWKtRqOqqmpXuaqqFpNSqVKmr1MB4KxnAIkZAIw4h+Xy4+GJJRW7fYKk2Qr0yTU06jNu8IQw/PcfAatjDu4nmevHNT6/f79OOEmaDJs7HxlJu35ikUduRsh0xu/iILo5+ylM2y8NEYu3evEAr1bifCMztyyP3PPL+D61q0WgZ6vcrKyiIPH95HUfaoVPdpWy0y28oyyzuPKChrbOQXyaur2IZsqo9pGTncTgJii3fEO1hOB9OyaZgmO7sFnj3PydrCtk05Ywtgc4vF6iJFZZOV4lNy7QK52x+z+ts7VDbmGEj9e9K0KGmeWC8e0kveDf5NWtpxcOj7/R6Z3Xqe5c2/eLLyJ5trC9IAFXX9F5Snd7FqTyR1qWfXJZbDgziml4D2xMKQKPAJfT9dJ2BB6JMx2iWeF9d5srPMUn4B1S2ztrrO5Us3mP/+V/54sMz1b74mv7GGqmhYqk5Xb+LZHXyni293iXsiK2l5FIVkbLOMJbWpmzZKS+W58Yy/f7/PxKlpTp48z52fbzOTPUGtsoftuthtqZVt4YgKooSZdDxOu07KNFOuFNne2aJYLGAYOo1GjZ8unOWtkVcZHzvO+2+OMPLKETRlN9Wa5/l0/SitaZJ+mKQuWowHw/SCTE1XpeUKttPGSSRhNrk3P8eV8Q/57sI5Pj9+jM8+OUalXBKGXQyRkt4OcD0BlVQ7Am66AYbli6w8MlqtKrpqyKTUMdtNmZAKm+tL/HBtlq/OjvPj9VluXJ0lXyhR0dsYbZ9OEGN1ezheX4DF/Bg/GogKwoRhVUQqI1ZXaYpgNa3M40f3mTqT5fzkF1y5OMXszDn2S6V0UmyrjetYqTYDqX0ceCItmXGZxbSGtZqaMkwsUXrd0Lh2aYY3jh7h7aMv8d5rL/PBu6/LfCupDh23I6kn6QVpHYMgxA+SH8zgsIZKWZqyvcluYVvAVOrC9MG9u0yPjzHz5SiXsqPcnJtCl9Ikk2I7Li1HQOSHMBj05RJJvRtgOr4A+/wDjRB3VTzbQyoAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Resultados de Idealista"
        title="Resultados de la búsqueda en Idealista"
        src="/static/0e83e25c534428cbc1a9ce2e02db10bf/f058b/idealista_web.png"
        srcset="/static/0e83e25c534428cbc1a9ce2e02db10bf/c26ae/idealista_web.png 158w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/6bdcf/idealista_web.png 315w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/f058b/idealista_web.png 630w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/40601/idealista_web.png 945w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/78612/idealista_web.png 1260w,
/static/0e83e25c534428cbc1a9ce2e02db10bf/e8d8a/idealista_web.png 2349w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Con eso en mente, he creado una sencilla función que permite hacer web scraping para obtener los pisos. Le he puesto una opción para filtrar por precio (aunque es algo que se puede hacer también a través de la URL). El código es el siguiente:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">scrap_idealista</span><span class="token punctuation">(</span>max_price<span class="token punctuation">)</span><span class="token punctuation">:</span>
    driver <span class="token operator">=</span> initialize_driver<span class="token punctuation">(</span>IDEALISTA_URL<span class="token punctuation">)</span>
    scroll_down_and_up<span class="token punctuation">(</span>driver<span class="token punctuation">)</span>

    <span class="token comment"># Be kind and accept the cookies</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'didomi-notice-agree-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># No cookies button, no problem!</span>

    <span class="token comment"># Find each flat element</span>
    elements <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="main-content"]'</span><span class="token punctuation">)</span>
    items <span class="token operator">=</span> elements<span class="token punctuation">.</span>find_elements_by_class_name<span class="token punctuation">(</span><span class="token string">'item-multimedia-container'</span><span class="token punctuation">)</span>

    flat_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> item <span class="token keyword">in</span> items<span class="token punctuation">:</span>
        <span class="token comment"># Get the link for that flat</span>
        link <span class="token operator">=</span> item<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'./div/a[@href]'</span><span class="token punctuation">)</span>
        link <span class="token operator">=</span> link<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>

        <span class="token comment"># Get the price for that flat</span>
        result <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'.*\\n(.*)€\/mes'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        price_str <span class="token operator">=</span> result<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        price <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>price_str<span class="token punctuation">)</span>

        <span class="token keyword">if</span> price <span class="token operator">&lt;=</span> max_price<span class="token punctuation">:</span>
            flat_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span> 
                <span class="token string">'link'</span><span class="token punctuation">:</span> link<span class="token punctuation">,</span> 
                <span class="token string">'price'</span><span class="token punctuation">:</span> price<span class="token punctuation">,</span>
                <span class="token string">'image'</span><span class="token punctuation">:</span> item<span class="token punctuation">.</span>screenshot_as_png<span class="token punctuation">,</span> 
                <span class="token string">'image_name'</span><span class="token punctuation">:</span> item<span class="token punctuation">.</span><span class="token builtin">id</span> <span class="token operator">+</span> <span class="token string">'.png'</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> flat_list</code></pre></div>
<p>Aquí se ven varias cosas, pero por lo general es bastante sencillo de entender. Antes que nada, se carga el driver de Selenium y se hace scroll por toda la página. Lo primero carga la web y permite tener todo listo para comenzar a buscar. El scroll es debido a que, en ocasiones, las webs van ofreciendo contenido a medida que el usuario va haciendo scroll, por lo que hacer un scroll rápido antes de comenzar a sacar información está muy bien.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">initialize_driver</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>executable_path<span class="token operator">=</span><span class="token string">'./chromedriver.exe'</span><span class="token punctuation">)</span>
    driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    driver<span class="token punctuation">.</span>set_window_position<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    driver<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">1920</span><span class="token punctuation">,</span> <span class="token number">1080</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> driver</code></pre></div>
<p>Usar Selenium es muy sencillo. En este caso estoy usando el driver para Chrome, que tengo justo en mi directorio, por conveniencia. Tras ello, cargar la URL y configurar la ventana para que tenga un tamaño decente. Esto es importante, porque los elementos estarán colocados de diferente manera en función del tamaño de la ventana. El diseño responsive está muy bien, pero es uno de los peores enemigos del <em>scrapper</em>, así que poner una resolución consistente es importante para obtener siempre los mismos resultados.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">scroll_down_and_up</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">:</span>
    driver<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">'window.scrollTo(0, document.body.scrollHeight);'</span><span class="token punctuation">)</span>
    sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    driver<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">'window.scrollTo(0, 0);'</span><span class="token punctuation">)</span></code></pre></div>
<p>En lo que respecta al scroll aquí no hay nada especial. Un poco de JS y listo.</p>
<p>La chicha está después. Lo primero, aceptar las cookies para poder navegar por el sitio y que no se vea nada raro. Aquí es donde se puede ver la potencia de Selenium</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'didomi-notice-agree-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>Se explica solo. Se coge el elemento con ese ID, que en este caso es un botón, y se click. Lo siguiente es buscar los elementos con la información de los pisos. Esas tarjetitas que aparecen en lista. Como todos los elementos de una web, tienen clases o atributos que los identifican.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">elements <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="main-content"]'</span><span class="token punctuation">)</span>
items <span class="token operator">=</span> elements<span class="token punctuation">.</span>find_elements_by_class_name<span class="token punctuation">(</span><span class="token string">'item-multimedia-container'</span><span class="token punctuation">)</span></code></pre></div>
<p>En este caso he hecho búsquedas con XPath y a través de los nombres de las clases. Si se ve la web de idealista, se puede sacar esta información. En cada web será diferente. Lo bueno de Selenium es que te permite obtener elementos y después buscar dentro de ellos. Así, se puede ir paso a paso hasta llegar a donde se quiere.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/16be55df67c84a2cfa6f9c3db1334fbd/7e23a/idealista_scraping.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACiElEQVQoz22SWU8TURiG+0dYS2npRmnLWhaFgoSYsMiNf8Ff4K3RK2NEE41xiWEJQQgRpJRaymLDIgQFNayFtiyaUmynDEXxQvp4OhivnOTJd85k8uR9zxmVlEggSRKxeJxIJELk8JBoNPqP9LtYLMbv83NSqRTpp6W1nYJ8G9XF9RSZS1HnFaBWawU6VLIs8/3oiB+nSUidi89Tf2d6eSH4FZEJPplRiM+GaW6/hjpHR4mtBpulnCJTCSaDDYOhEFVcPkE6SSPjf7/AiG8C96SfkfEp3L4pXF4fff2DLEzPsfVlg8jBIW3t1ykwFlNlrcJqrqCw0IHFUonZXI5qcGaFoc/zuLYO6FvZo3tpWxCk60OYHkH3UkjZD29Hce9LTG/KNNa3ojeWUFPWiMNWR7VIajWXYdDbUPV4/fQvz+EKfGX825ng5384w7OXFMITJteT1NU0ifMy4LA3UFp0GUeJE7tIqdeJyp3vAjyfWaN7McSL2XUGPoUZDcQY3YnjDkpiSri244yFj3HvyYrQeamJXI1JJGvAUdSA3e6kvKwBq6UC1TPvKreHZrnv+UiHe47epS2GNqOMCKFLMBpMCJnM2K6sJJwSwkZnMxqtiTJRtdhSJc5PVLbWYDKKyvd6fdx8OcCdV2Pc6HhK58I6nv3khTCdMJTAnU4ncO0eKwmvXmkTv4oGXYERrVZPvtZIfm4+Wo0W1WOR7qF7irvD09zqf0vvsqi8e8rQToI3QSFKJwvLinBYyH2rMvXOFrKFICszB73BiNpcSY65VpmqLn+ADu8cDzzzPPItCuEugxtHvA7Exc1KCi4hd4VkhoV4Yk2mtq6F3CwdeRl5ZOcItBYyNWYy1Hr+AK+OL/wvlxPPAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Scraping en Idealista"
        title="Elementos a buscar con Selenium"
        src="/static/16be55df67c84a2cfa6f9c3db1334fbd/f058b/idealista_scraping.png"
        srcset="/static/16be55df67c84a2cfa6f9c3db1334fbd/c26ae/idealista_scraping.png 158w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/6bdcf/idealista_scraping.png 315w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/f058b/idealista_scraping.png 630w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/40601/idealista_scraping.png 945w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/78612/idealista_scraping.png 1260w,
/static/16be55df67c84a2cfa6f9c3db1334fbd/7e23a/idealista_scraping.png 2850w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Buscar a través del id y de las clases es sencillo. Buscar a través de XPath es más complicado pero muy potente. Esto se puede simplificar con una extensión como <a href="https://github.com/trembacz/xpath-finder">xPath Finder</a>, que te permite obtener el XPath de cualquier elemento de una web.</p>
<p>Con ello ya se tienen una lista de items, que son cada una de las tarjetitas esas. Aquí solo queda sacar la información que se quiera sacar.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">for</span> item <span class="token keyword">in</span> items<span class="token punctuation">:</span>
    <span class="token comment"># Get the link for that flat</span>
    link <span class="token operator">=</span> item<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'./div/a[@href]'</span><span class="token punctuation">)</span>
    link <span class="token operator">=</span> link<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>

    <span class="token comment"># Get the price for that flat</span>
    result <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'.*\\n(.*)€\/mes'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    price_str <span class="token operator">=</span> result<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    price <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>price_str<span class="token punctuation">)</span>

    <span class="token keyword">if</span> price <span class="token operator">&lt;=</span> max_price<span class="token punctuation">:</span>
        flat_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span> 
            <span class="token string">'link'</span><span class="token punctuation">:</span> link<span class="token punctuation">,</span> 
            <span class="token string">'price'</span><span class="token punctuation">:</span> price<span class="token punctuation">,</span>
            <span class="token string">'image'</span><span class="token punctuation">:</span> item<span class="token punctuation">.</span>screenshot_as_png
        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Para esto hay muchas formas. Selenium te permite sacar el elemento como imagen, por lo que para después enviarlo de esa manera puede estar muy bien. En mi caso saco el piso como imagen (para enviar después por Telegram así), el precio (para ver que no se pase del tope establecido) y el link, para enviarlo junto a cada imagen para poder meterme en el piso que me interesa. El nombre de la imagen me permite después gestionar las imágenes para enviarlas por Telegram.</p>
<p>Y esto es todo, así de sencillo. Ya solo hay que enviar esa información por Telegram.</p>
<h2>Parte 2: crear un bot de Telegram</h2>
<p>Crear un bot de Telegram es tan sencillo como usar <a href="https://t.me/botfather">BotFather</a>, el bot que te permite crear bots. Tras crear un bot con él, te da un token que es lo que te permite hacer lo que quieras con la API. La creación del bot es trivial, consiste en hablar con el bot.</p>
<p>Una vez teniendo un token se puede hacer uso del <a href="https://github.com/python-telegram-bot/python-telegram-bot">wrapper para Python</a> que he mencionado. Instalar con <code class="language-text">pip</code> y listo. Del wrapper he utilizado lo siguiente:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> telegram
<span class="token keyword">from</span> telegram <span class="token keyword">import</span> Bot<span class="token punctuation">,</span> Update
<span class="token keyword">from</span> telegram<span class="token punctuation">.</span>ext <span class="token keyword">import</span> Updater
<span class="token keyword">from</span> telegram<span class="token punctuation">.</span>ext <span class="token keyword">import</span> CallbackContext
<span class="token keyword">from</span> telegram<span class="token punctuation">.</span>ext <span class="token keyword">import</span> CommandHandler</code></pre></div>
<p>Con ello, se puede instanciar el bot con el token obtenido y crear callbacks que permitan estar a la escucha de comandos de manera sencilla.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'token.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        token <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

    updater <span class="token operator">=</span> Updater<span class="token punctuation">(</span>token<span class="token operator">=</span>token<span class="token punctuation">,</span> use_context<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    dispatcher <span class="token operator">=</span> updater<span class="token punctuation">.</span>dispatcher

    logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span><span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><span class="token punctuation">,</span>
                        level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span>

    dispatcher<span class="token punctuation">.</span>add_handler<span class="token punctuation">(</span>CommandHandler<span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>
    dispatcher<span class="token punctuation">.</span>add_handler<span class="token punctuation">(</span>CommandHandler<span class="token punctuation">(</span><span class="token string">'bilatu'</span><span class="token punctuation">,</span> bilatu<span class="token punctuation">)</span><span class="token punctuation">)</span>
    dispatcher<span class="token punctuation">.</span>add_handler<span class="token punctuation">(</span>CommandHandler<span class="token punctuation">(</span><span class="token string">'idealista'</span><span class="token punctuation">,</span> idealista<span class="token punctuation">)</span><span class="token punctuation">)</span>
    dispatcher<span class="token punctuation">.</span>add_handler<span class="token punctuation">(</span>CommandHandler<span class="token punctuation">(</span><span class="token string">'fotocasa'</span><span class="token punctuation">,</span> fotocasa<span class="token punctuation">)</span><span class="token punctuation">)</span>

    updater<span class="token punctuation">.</span>start_polling<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>Esa funcion se ejecuta al arrancar el script. Cojo el token de un archivo separado y creo el bot. En el código se ve que se crean cuatro handlers. Esos son los comandos que después se pueden ejecutar con el bot. en este caso son <code class="language-text">/start</code>,<code class="language-text">/bilatu</code> (“buscar” en euskera),<code class="language-text">/idealista</code> ,<code class="language-text">/fotocasa</code>. Así se puede buscar en todos o solo en uno en específico. Las funciones llamadas con los callbacks son las siguientes:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">bilatu</span><span class="token punctuation">(</span>update<span class="token punctuation">:</span> Update<span class="token punctuation">,</span> context<span class="token punctuation">:</span> CallbackContext<span class="token punctuation">)</span><span class="token punctuation">:</span>
    scrap<span class="token punctuation">(</span>update<span class="token punctuation">,</span> context<span class="token punctuation">,</span> <span class="token string">'all'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">idealista</span><span class="token punctuation">(</span>update<span class="token punctuation">:</span> Update<span class="token punctuation">,</span> context<span class="token punctuation">:</span> CallbackContext<span class="token punctuation">)</span><span class="token punctuation">:</span>
    scrap<span class="token punctuation">(</span>update<span class="token punctuation">,</span> context<span class="token punctuation">,</span> <span class="token string">'idealista'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">fotocasa</span><span class="token punctuation">(</span>update<span class="token punctuation">:</span> Update<span class="token punctuation">,</span> context<span class="token punctuation">:</span> CallbackContext<span class="token punctuation">)</span><span class="token punctuation">:</span>
    scrap<span class="token punctuation">(</span>update<span class="token punctuation">,</span> context<span class="token punctuation">,</span> <span class="token string">'fotocasa'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">scrap</span><span class="token punctuation">(</span>update<span class="token punctuation">:</span> Update<span class="token punctuation">,</span> context<span class="token punctuation">:</span> CallbackContext<span class="token punctuation">,</span> site<span class="token punctuation">)</span><span class="token punctuation">:</span>
    send_initial_message<span class="token punctuation">(</span>context<span class="token punctuation">,</span> update<span class="token punctuation">)</span>
    max_price <span class="token operator">=</span> get_max_price<span class="token punctuation">(</span>context<span class="token punctuation">)</span>
    flat_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> site <span class="token keyword">in</span> <span class="token punctuation">{</span> <span class="token string">'idealista'</span><span class="token punctuation">,</span> <span class="token string">'all'</span> <span class="token punctuation">}</span><span class="token punctuation">:</span>
        flat_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>scrap_idealista<span class="token punctuation">(</span>max_price<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> site <span class="token keyword">in</span> <span class="token punctuation">{</span> <span class="token string">'fotocasa'</span><span class="token punctuation">,</span> <span class="token string">'all'</span> <span class="token punctuation">}</span><span class="token punctuation">:</span>
        flat_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>scrap_fotocasa<span class="token punctuation">(</span>max_price<span class="token punctuation">)</span><span class="token punctuation">)</span>
    send_results<span class="token punctuation">(</span>flat_list<span class="token punctuation">,</span> update<span class="token punctuation">,</span> context<span class="token punctuation">)</span>
    send_final_message<span class="token punctuation">(</span>context<span class="token punctuation">,</span> update<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">send_initial_message</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">:</span>
    context<span class="token punctuation">.</span>bot<span class="token punctuation">.</span>send_message<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>update<span class="token punctuation">.</span>effective_chat<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'Emaidazu minutu bat!'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">send_final_message</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">:</span>
    context<span class="token punctuation">.</span>bot<span class="token punctuation">.</span>send_message<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>update<span class="token punctuation">.</span>effective_chat<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'Hortxe dauzkazu!'</span><span class="token punctuation">)</span></code></pre></div>
<p>Baásicamente se llaman a unas u otras funciones de scraping en función de el callback que se ejecuta. Los obtetos <code class="language-text">context</code> y <code class="language-text">update</code> permiten obtener la instancia del bot y toda la información relativa a los comandos que se han ejecutado (qué usuario los ha ejecutado, en que chat, grupo o canal, si ha pasado argumentos, etc.). Ahí también se puede ver los sencillo que es mandar un mensaje con un bot con la funcion <code class="language-text">bot.send_message()</code>.</p>
<p>Lo interesante de esa parte es la función <code class="language-text">send_results()</code>, que coge lo generado por las funciones de scraping (la lista de pisos, cada uno con toda la información mencionada) y lo envía por Telegram.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">send_results</span><span class="token punctuation">(</span>flat_list<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">,</span> update<span class="token punctuation">:</span> Update<span class="token punctuation">,</span> context<span class="token punctuation">:</span> CallbackContext<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> flat <span class="token keyword">in</span> flat_list<span class="token punctuation">:</span>
        context<span class="token punctuation">.</span>bot<span class="token punctuation">.</span>send_photo<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>update<span class="token punctuation">.</span>effective_chat<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> caption<span class="token operator">=</span>flat<span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> photo<span class="token operator">=</span>flat<span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></code></pre></div>
<p>Esto tambien bastante sencillo. Para enviar un mensaje basta con indicar el id del chat (que es algo que se recibe en los callbacks, apra saber desde donde se ha llamdo al comando) y lo que se quiera mandar. Antes se ha visto como se mandaba un mensaje con <code class="language-text">bot.send_message()</code>, pasando el chat y el texto. En este caso se envia la foto de cada piso con <code class="language-text">bot.send_photo()</code>, indicando en <code class="language-text">photo</code> la imagen recogida y en <code class="language-text">caption</code> el link.</p>
<p>Con todo ello, es tan sencillo como lanzarlo y comenzar a buscar piso.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c7f463628662091337632d0c32a84f79/afd0b/telegram_bot.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 108.86075949367088%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAEkUlEQVQ4y32TeUzTZxjHf38JBlgGSG9LOXrRE8oxaDcEa2lLy1VoC0i5xXC4BQNjHHI7dYdLZhQ1HE4YIAphyOFk4MaA6JItWbIlmzqiHNL+etpKT2Av4EayLD755v09efN83/d9Pu/7g8g8cXZ29aOyU0mCRC5fyI6IpjA5VFb4G0QLjWRFxIARIpDpMeyIWqGUExpJpLGDKYygNwoUBFMZpBAWkcqEUCicLxLr7os8hMSCHIU+DIRE4f5fSAwCgUYgsX4IkGCgnWoUDrM77pnRGDwG64/BEbD/EdafRA+jcrhkGovCCAuisiAcPiiYTA8ihgSRaMEkun8AGcyAtb19/Lx9EHvy2Uu8/XABxEAqK5AUAs5PINEgTmRMYrJMLE3jC6V8kTRBkiqRZUfx4sghLDqTA8RgcmiMMCAmO5wQQPTzQ4GlwZkRSAxUX1M13NdZWVp4obXu7JnqO7f6Hy89f7y0vLKuX9ca1zQGjc60DhvX1DqL1VFTU+fh6Q1aQKHxoEGo7sOqof6v2lvre3uudV65ODVxVwNrNLDaoNcZjQaDQa/X63Q62Gazbm9vNzY2e3i+vWve4QqdKiupLlLkvEcpk0QWiaNGB3u3NjctZpPZ8spssTjsNpfLYQcfux2Ym5tbD7h77pulSUlp4mNRFP8EDjmFF9reWH9/dm7i2+8mZ+YnZhYezD+am1+Ynp2bnJ1/sPhzUUk5IZAE7uK1GQBLVqhkqhPJWXnCtCy+JF2iyE+UFwjTc0UZeaL0XIFUJpKkHI2OOsbjMkLoNGY4uMvX5ob3854+vPP01+m+c6WtuUevtZ3+6/nq0rOVdY3hhcag1hrUupcmg+HPW5f+6P+iIjP1oJcv9t+dL9RXPBy9Otnz8dk8QWuecLjrkhrWrK6uaLUanV4Lw7BWp7PabDancwdYU4unl/d+z7Hc8By5+OQRVgr+rRIua/izJlC0w8gJwrW9G1tgxrUJkpbmtgNuHvvmaC4vOj4hlkxOIxMUEYy6fPntb6aGRsYGR+8NjE6PTc2MT94bHpscujs9Nv1jbmFJMIm2D4zH5clkcr5AIk1TCkVJ8QJJkrJAqigUy/MSFQWi9ByBBABLjQulHwll0EgkKiNsH1jH5Q4TvD538+IncZRKP6g7J2FNo19eVRvNVpNlw/hyw2ixW19trIx3r453nVYp3D2894F92tjwy8IPI+cqa7kBIjdopDxdazSu7QCDgWAtrFGvg9CZLaDnM01t/wDDozB4KIf/7u3zH7WI2V9KcKPFxCfXiwEeh90KgDkczj1gm1vbzl3azU0tbuCFHQ5AITEoJBpiE/xVseGySGqlhH659J0rVRkdPf3Xu2929Ax29AzdGBju/Xqg80bf1a7e7r4hZZaKSgtFo7HoYDaaGAZF8eKlyvwMVTE/+Xh8aoEwozC7qEJZUK4oLJfnl2WoTqYpVemZqmSZIiUjMywimkRhIg4hOHx5pPA49EHJiZ7zTX2ftz/5/befFhe/vz+19Gx57QWsV+tMRrPF6tywuRyuLYvZ7NrarK1vcD/oBWjTwH/Ojvgb+hooorqyCAgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Bot de Telegram"
        title="Bot de Telegram buscando piso"
        src="/static/c7f463628662091337632d0c32a84f79/f058b/telegram_bot.png"
        srcset="/static/c7f463628662091337632d0c32a84f79/c26ae/telegram_bot.png 158w,
/static/c7f463628662091337632d0c32a84f79/6bdcf/telegram_bot.png 315w,
/static/c7f463628662091337632d0c32a84f79/f058b/telegram_bot.png 630w,
/static/c7f463628662091337632d0c32a84f79/40601/telegram_bot.png 945w,
/static/c7f463628662091337632d0c32a84f79/afd0b/telegram_bot.png 1153w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Tal y como queda me parece bastante elegante. Cogiendo el elemento entero como imagen se puede ver toda la información de un vistazo y poniendo el enlace se puede acceder al anuncio para obtener más información o directamente contactar con el anunciante. Otra opción podría haber sido coger el texto y haber creado una lista con los pisos y los enlaces, pero la primera forma me parece de las más elegantes y, sin duda, la más sencilla de todas.</p>
<h2>Parte 3: crear un canal de Telegram para informar de los pisos</h2>
<p>Sí, con esto no tengo suficiente. Escribir un comando al bot es demasiado trabajo. Por ello, a parte de tener el bot así, he añadido un metodo para que el bot, cada cierto tiempo, escriba en un canal las ofertas que hay. Esto es basicamente lo msimo que hace por ejemplo el <a href="https://t.me/getmanfred">bot de Manfred</a> con las ofertas de trabajo, pero con mayor frecuencia. Además, me gusta como en ese bot no va dejando los mensajes de días anteriores, sino que solo está el último mensaje. Así evita que se llene el canal de mierda y deja que haya solo lo que tiene que haber. Por ello, yo lo he hecho igual.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">update_channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># Get channel and bot info</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'token.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        token <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'channel_id.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        channel_id <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

    bot <span class="token operator">=</span> telegram<span class="token punctuation">.</span>Bot<span class="token punctuation">(</span>token<span class="token operator">=</span>token<span class="token punctuation">)</span>

    <span class="token comment"># Remove previously sended messages</span>
    stacked_messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'sent_messages.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            stacked_messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> stacked_messages<span class="token punctuation">:</span>
        bot<span class="token punctuation">.</span>delete_message<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>channel_id<span class="token punctuation">,</span> message_id<span class="token operator">=</span>stacked_messages<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># Scrap all with the defaul top price</span>
    flat_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    flat_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>scrap_idealista<span class="token punctuation">(</span>top_price<span class="token punctuation">)</span><span class="token punctuation">)</span>
    flat_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>scrap_fotocasa<span class="token punctuation">(</span>top_price<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># Send the messages with the info</span>
    <span class="token comment"># Saves the message_id of the messages to be able to delete them on the next one</span>
    stacked_messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span>bot<span class="token punctuation">.</span>send_message<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>channel_id<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'Kaixo! Hamen dauzkazu oraintxe bertan dauden pisuak:'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>message_id<span class="token punctuation">)</span>
    <span class="token keyword">for</span> flat <span class="token keyword">in</span> flat_list<span class="token punctuation">:</span>
        stacked_messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span>bot<span class="token punctuation">.</span>send_photo<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>channel_id<span class="token punctuation">,</span> caption<span class="token operator">=</span>flat<span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> photo<span class="token operator">=</span>flat<span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>message_id<span class="token punctuation">)</span>
        sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    stacked_messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span>bot<span class="token punctuation">.</span>send_message<span class="token punctuation">(</span>chat_id<span class="token operator">=</span>channel_id<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'Hortxe dauzkazu!'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>message_id<span class="token punctuation">)</span>

    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'sent_messages.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">for</span> message <span class="token keyword">in</span> stacked_messages<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span></code></pre></div>
<p>Lo sé, esto no es lo más limpio que has visto en tu vida. Es basicamente más de lo mismo pero gestionando los mensajes que se han enviado. Cada mensaje enviado tiene un <code class="language-text">message_id</code>, que es lo que permite despues poder elimiarlos. Esta función basicamente elimina lo que se haya escrito antes en el canal, realiza el scraping, manda la información y guarda los <code class="language-text">message_id</code> para poder borrar los mensajes la próxima vez. Guarda esos id en un fichero para que, si peta el bot, no se pierdan y se puedan borrar al iniciarlo de nuevo, así no queda basura en el canal.</p>
<p>En este caso, hace falta crear una instancia de <code class="language-text">Bot</code> ya que no se recibe de ningun lado. Ademas de esto, es necesario tener el id del chat o canal en el que se quiera escribir. Hay muchos bots que permiten sacar esos id.</p>
<p>La idea tener el script en ejecucion 24/7 y con ello el bot siempre listo. Por un lado, con los handlers escuchando, lo que se hace con <code class="language-text">updater.start_polling()</code> visto antes. Por otro lado, hay que tener alguna manera para ejecutar la función <code class="language-text">update_channel()</code> cada cierto tiempo. Para ello se puede usar <code class="language-text">schedule</code>, una librería que permite programar tareas de manera sencilla. Para instalar, usar <code class="language-text">pip</code> y listo.</p>
<p>Para usarla para ejecutar <code class="language-text">update_channel()</code> cada cierto tiempo, basta con añadir al final de la función <code class="language-text">init()</code> lo siguiente:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">schedule<span class="token punctuation">.</span>every<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hour<span class="token punctuation">.</span>at<span class="token punctuation">(</span><span class="token string">":00"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>do<span class="token punctuation">(</span>update_channel<span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    schedule<span class="token punctuation">.</span>run_pending<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> </code></pre></div>
<p>Como se ve, es muy sencillo de usar y el código se explica solo. No hay que asustarse por el <code class="language-text">while True</code>. El polling de los callbacks se ejecuta en otros hilos, por lo que esto no interfiere. Esto hace que se quede indefinidamente comprobando si tiene que lanzar alguna tarea.</p>
<p>Con todo esto, ya solo queda dejarlo en algun lugar ejecutándose. Este tipo de cosas son perfectas para una Raspberry Pi o algo del estilo. También se puede meter en un VPS o en donde sea. Lo único que hay que tener en cuenta es que, o tenga pantalla, o se use alguna libreria como la mencionada para emularla. Además de que tiene que tener el navegador que se vaya a usar instalado.</p>
<p>También se pueden añádir más sitios a los que hacer scraping, es facilmente escalable. En mi caso uso Idealista y Fotocasa, pero basta con añadir más funciones de scraping. Obviamente, cómo coger la informacion varía de sitio a sitio.</p>
<h2>Conclusiones</h2>
<p>Crear un bot de este tipo es una tarea sencilla, como se puede ver. Aquí la dificultad está en encontrar un piso decente que no cueste un ojo de la cara. Eso si que es difícil de verdad.</p>
<p>Hacer un bot para obtener información actualizada de una puede ser muy util. Usar web scraping en vez de usar APIs tiene sus ventajas. Lo primero es que la mayoria de webs no tienen APIs, por lo que en esos caso no queda otra. En los casos en las que sí tienen, pueden estar limitadas. Lo bueno del web scraping es que te permite coger <strong>lo que tú quieras y como tú quieras</strong>. Y que nadie os engañe; aqui, mientras no tires la web o extraigas datos de manera masiva, no hay delito.</p>
<p>Espero haberme explicado bien y que si lees esto te pique la curiosidad para trastear con estos temas. Yo, por mi parte no voy a parar :)</p>
<p>Por último, dejo aquí el <a href="https://github.com/ander94lakx/pisu-bot">repo de GitHub</a> con el código completo. Como siempre, libre para que hagáis lo que queráis.</p>
<p>Y recordad: <strong><em>Scraping is not a crime!</em></strong></p></section><hr/></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li class="blog-post-nav-prev"><a rel="prev" href="/blog/2022-01-29-polkit/">← <!-- -->Pwnkit: Vulnerabilidad en Polkit (CVE-2021-4034) en 5 minutos</a></li></ul></nav><hr/><div id="disqus_thread"></div><footer><div class="bio"><div class="bio-avatar gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAMCBAYF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAgEAA//aAAwDAQACEAMQAAABnn5dVOlc0OlUc1xzX//EAB0QAAICAQUAAAAAAAAAAAAAAAECAAMEERIUMkL/2gAIAQEAAQUCCpVXi2ta+yIDoqlJybZ5PQz/xAAXEQADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/ATFf/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8B0tz/AP/EAB4QAAEEAQUAAAAAAAAAAAAAAAEAAhAREiEiMTJB/9oACAEBAAY/Ai5m41ysSBBo0ra7Vd4v2P/EAB0QAAMAAgIDAAAAAAAAAAAAAAABESFREEExYbH/2gAIAQEAAT8hQGlV6Ee6lq49gGJsR2qehbQnMRI+jyfR/9oADAMBAAIAAwAAABAz3/7/xAAYEQACAwAAAAAAAAAAAAAAAAABEBExQf/aAAgBAwEBPxCBqja//8QAGBEAAgMAAAAAAAAAAAAAAAAAEDEBIYH/2gAIAQIBAT8QShQsH//EAB0QAQADAAIDAQAAAAAAAAAAAAEAESExgUFRYXH/2gAIAQEAAT8QtKGpunXEQFC0CV88wFRaOBYKdppU2Y6HmUTX9iXqm4I60DreYNH0Gf/Z" alt="Ander Granado" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/572c94a0b84f88cd2315038301d25e9d/340ed/profile-pic.jpg 1x,
/static/572c94a0b84f88cd2315038301d25e9d/32ce1/profile-pic.jpg 1.5x,
/static/572c94a0b84f88cd2315038301d25e9d/04d41/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/572c94a0b84f88cd2315038301d25e9d/340ed/profile-pic.jpg 1x,
/static/572c94a0b84f88cd2315038301d25e9d/32ce1/profile-pic.jpg 1.5x,
/static/572c94a0b84f88cd2315038301d25e9d/04d41/profile-pic.jpg 2x" src="/static/572c94a0b84f88cd2315038301d25e9d/340ed/profile-pic.jpg" alt="Ander Granado" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Escrito por <strong>Ander Granado</strong> <!-- -->, Hacker, Cybersecurity Consultant &amp; Software Engineer<!-- --> </p></div></footer></main><footer class="d-flex"><div class="copyright-text">Copyright © <!-- -->2022<!-- -->, <a href="https://github.com/ander94lakx">Ander Granado</a></div><div class="footer-icon-group"><a href="https://www.twitter.com/andergrma" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 26 28" class="footer-social-icon"><title>twitter</title><path d="M25.312 6.375c-0.688 1-1.547 1.891-2.531 2.609 0.016 0.219 0.016 0.438 0.016 0.656 0 6.672-5.078 14.359-14.359 14.359-2.859 0-5.516-0.828-7.75-2.266 0.406 0.047 0.797 0.063 1.219 0.063 2.359 0 4.531-0.797 6.266-2.156-2.219-0.047-4.078-1.5-4.719-3.5 0.313 0.047 0.625 0.078 0.953 0.078 0.453 0 0.906-0.063 1.328-0.172-2.312-0.469-4.047-2.5-4.047-4.953v-0.063c0.672 0.375 1.453 0.609 2.281 0.641-1.359-0.906-2.25-2.453-2.25-4.203 0-0.938 0.25-1.797 0.688-2.547 2.484 3.062 6.219 5.063 10.406 5.281-0.078-0.375-0.125-0.766-0.125-1.156 0-2.781 2.25-5.047 5.047-5.047 1.453 0 2.766 0.609 3.687 1.594 1.141-0.219 2.234-0.641 3.203-1.219-0.375 1.172-1.172 2.156-2.219 2.781 1.016-0.109 2-0.391 2.906-0.781z"></path></svg></a><a href="https://github.com/ander94lakx" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 26 28" class="footer-social-icon"><title>github</title><path d="M13,2.4c-7.2,0-13,5.8-13,13C0,21,3.7,25.9,8.9,27.6c0.6,0.1,0.9-0.3,0.9-0.6c0-0.3,0-1.1,0-2.2  c-3.6,0.8-4.4-1.7-4.4-1.7c-0.6-1.5-1.4-1.9-1.4-1.9C2.8,20.4,4,20.4,4,20.4c1.3,0.1,2,1.3,2,1.3c1.2,2,3,1.4,3.8,1.1  c0.1-0.8,0.5-1.4,0.8-1.7c-2.9-0.3-5.9-1.4-5.9-6.4c0-1.4,0.5-2.6,1.3-3.5c-0.1-0.3-0.6-1.6,0.1-3.4c0,0,1.1-0.3,3.6,1.3  c1-0.3,2.1-0.4,3.2-0.4c1.1,0,2.2,0.1,3.2,0.4c2.5-1.7,3.6-1.3,3.6-1.3c0.7,1.8,0.3,3.1,0.1,3.4c0.8,0.9,1.3,2.1,1.3,3.5  c0,5-3,6.1-5.9,6.4c0.5,0.4,0.9,1.2,0.9,2.4c0,1.7,0,3.1,0,3.6c0,0.3,0.2,0.8,0.9,0.6c5.1-1.7,8.9-6.6,8.9-12.3  C25.9,8.2,20.1,2.4,13,2.4z"></path></svg></a><a href="mailto:ander@protonmail.com" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 28 28" class="footer-social-icon"><title>email</title><path d="M26 23.5v-12c-0.328 0.375-0.688 0.719-1.078 1.031-2.234 1.719-4.484 3.469-6.656 5.281-1.172 0.984-2.625 2.188-4.25 2.188h-0.031c-1.625 0-3.078-1.203-4.25-2.188-2.172-1.813-4.422-3.563-6.656-5.281-0.391-0.313-0.75-0.656-1.078-1.031v12c0 0.266 0.234 0.5 0.5 0.5h23c0.266 0 0.5-0.234 0.5-0.5zM26 7.078c0-0.391 0.094-1.078-0.5-1.078h-23c-0.266 0-0.5 0.234-0.5 0.5 0 1.781 0.891 3.328 2.297 4.438 2.094 1.641 4.188 3.297 6.266 4.953 0.828 0.672 2.328 2.109 3.422 2.109h0.031c1.094 0 2.594-1.437 3.422-2.109 2.078-1.656 4.172-3.313 6.266-4.953 1.016-0.797 2.297-2.531 2.297-3.859zM28 6.5v17c0 1.375-1.125 2.5-2.5 2.5h-23c-1.375 0-2.5-1.125-2.5-2.5v-17c0-1.375 1.125-2.5 2.5-2.5h23c1.375 0 2.5 1.125 2.5 2.5z"></path></svg></a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EPK628CMMZ"></script><script>
      window.excludeGtagPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-EPK628CMMZ',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-EPK628CMMZ', {"anonymize_ip":true,"cookie_expires":0,"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2022-02-05-bot-telegram-buscar-piso/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7f1ec355261b605a652a.js"],"app":["/app-0dddd4726be6c4290b5e.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-74d7f6035cf77ce348a2.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-490f2d3369affb8652b9.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-d7de837d25051db18acd.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-59539135caef7ac76822.js"]};/*]]>*/</script><script src="/polyfill-7f1ec355261b605a652a.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-490f2d3369affb8652b9.js" async=""></script><script src="/031b090406d5e8a147bd800614ce20dc3d33dac6-c72667e68f0c784e3ff7.js" async=""></script><script src="/commons-84bff570f61dcb4d334d.js" async=""></script><script src="/app-0dddd4726be6c4290b5e.js" async=""></script><script src="/styles-755093da0c07f4b49226.js" async=""></script><script src="/framework-8e528b732ab2eaadb7b7.js" async=""></script><script src="/webpack-runtime-1d952a1521ddef540734.js" async=""></script></body></html>